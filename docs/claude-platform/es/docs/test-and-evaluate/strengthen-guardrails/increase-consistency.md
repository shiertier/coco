# Aumentar la consistencia de la salida

Cómo hacer que las respuestas de Claude sean más consistentes mediante especificación de formato, prefilling, ejemplos y recuperación contextual.

---

<Tip>
**Para garantizar la conformidad con esquemas JSON**

Si necesitas que Claude siempre genere JSON válido que se ajuste a un esquema específico, utiliza [Structured Outputs](/docs/es/build-with-claude/structured-outputs) en lugar de las técnicas de ingeniería de prompts que se muestran a continuación. Los resultados estructurados proporcionan conformidad garantizada con esquemas y están diseñados específicamente para este caso de uso.

Las técnicas que se muestran a continuación son útiles para la consistencia general de la salida o cuando necesitas flexibilidad más allá de esquemas JSON estrictos.
</Tip>

Así es como hacer que las respuestas de Claude sean más consistentes:

## Especifica el formato de salida deseado
Define con precisión tu formato de salida deseado utilizando JSON, XML o plantillas personalizadas para que Claude entienda cada elemento de formato de salida que requieres.

<section title="Ejemplo: Estandarización de comentarios de clientes">

    | Rol | Contenido |
    | ---- | ------- |
    | Usuario | Eres una IA de Insights de Clientes. Analiza este comentario y genera una salida en formato JSON con las claves: "sentiment" (positivo/negativo/neutral), "key_issues" (lista), y "action_items" (lista de diccionarios con "team" y "task").<br/><br/>"He sido un usuario leal durante 3 años, pero la actualización reciente de la interfaz es un desastre. Encontrar funciones básicas ahora es una búsqueda del tesoro. Además, el nuevo precio 'premium' es escandaloso. Estoy considerando cambiarme a menos que esto se arregle ASAP." |
    | Asistente | \{<br/>  "sentiment": "negative",<br/>  "key_issues": [<br/>    "Poor UI/UX in recent update",<br/>    "Difficulty finding basic features",<br/>    "Perceived high pricing (new 'premium' tier)"<br/>  ],<br/>  "action_items": [<br/>    \{<br/>      "team": "Product",<br/>      "task": "Conduct usability testing and iterate on UI based on findings"<br/>    \},<br/>    \{<br/>      "team": "UX",<br/>      "task": "Create a feature discovery guide or onboarding flow"<br/>    \},<br/>    \{<br/>      "team": "Marketing",<br/>      "task": "Review pricing strategy and communicate value proposition"<br/>    },<br/>    \{<br/>      "team": "Customer Success",<br/>      "task": "Reach out to user, offer concessions to prevent churn"<br/>    \}<br/>  ]<br/>\} |

</section>

## Rellena previamente la respuesta de Claude
Rellena previamente el turno del `Assistant` con tu formato deseado. Este truco evita el preámbulo amigable de Claude y refuerza tu estructura.

<section title="Ejemplo: Informe de ventas diario">

    | Rol | Contenido |
    | ---- | ------- |
    | Usuario | Eres una IA de Inteligencia de Ventas perspicaz. Genera el informe de ventas de hoy.<br/><br/>Estructura el informe así:<br/><br/>\<report><br/>    \<summary><br/>        \<metric name="total_revenue">\$0.00\</metric><br/>        \<metric name="units_sold">0\</metric><br/>        \<metric name="avg_order_value">\$0.00\</metric><br/>    \</summary><br/>    \<top_products><br/>        \<br/>            \<name>Product Name\</name><br/>            \<revenue>\$0.00\</revenue><br/>            \<units>0\</units><br/>        \</product><br/>        ...<br/>    \</top_products><br/>    \<regional_performance><br/>        \<region><br/>            \<name>Region Name\</name><br/>            \<revenue>\$0.00\</revenue><br/>            \<growth>0.0%\</growth><br/>        \</region><br/>        ...<br/>    \</regional_performance><br/>    \<action_items><br/>        \<item>Action item.\</item><br/>        ...<br/>    \</action_items><br/>\</report> |
    | Asistente (prefill) | \<report><br/>    \<summary><br/>        \<metric name= |
    | Asistente | "total_revenue">\$842,567.00\</metric><br/>        \<metric name="units_sold">15,238\</metric><br/>        \<metric name="avg_order_value">\$55.29\</metric><br/>    \</summary><br/>    \<top_products><br/>        \<br/>            \<name>AcmeGuard Pro\</name><br/>            \<revenue>\$325,890.00\</revenue><br/>            \<units>3,621\</units><br/>        \</product><br/>        \<br/>            \<name>AcmeVault Enterprise\</name><br/>            \<revenue>\$254,400.00\</revenue><br/>            \<units>1,272\</units><br/>        \</product><br/>        \<br/>            \<name>AcmeBoost XL\</name><br/>            \<revenue>\$147,690.00\</revenue><br/>            \<units>4,923\</units><br/>        \</product><br/>    \</top_products><br/>    \<regional_performance><br/>        \<region><br/>            \<name>APAC\</name><br/>            \<revenue>\$258,960.00\</revenue><br/>            \<growth>12.8%\</growth><br/>        \</region><br/>        \<region><br/>            \<name>EMEA\</name><br/>            \<revenue>\$325,478.00\</revenue><br/>            \<growth>3.2%\</growth><br/>        \</region><br/>        \<region><br/>            \<name>Americas\</name><br/>            \<revenue>\$258,129.00\</revenue><br/>            \<growth>-2.1%\</growth><br/>        \</region><br/>    \</regional_performance><br/>    \<action_items><br/>        \<item>Investigate Americas revenue drop; schedule regional sales team meeting.\</item><br/>        \<item>Accelerate CloudGuard Pro rollout in APAC to capitalize on growth.\</item><br/>        \<item>Review NetBoost XL pricing; high volume but lower revenue.\</item><br/>    \</action_items><br/>\</report> |

</section>

## Limita con ejemplos
Proporciona ejemplos de tu salida deseada. Esto entrena la comprensión de Claude mejor que las instrucciones abstractas.

<section title="Ejemplo: Generación de inteligencia de mercado consistente">

    | Rol | Contenido |
    | ---- | ------- |
    | Usuario | Como IA de Inteligencia de Mercado, tu tarea es analizar datos sobre nuestros competidores. Aquí están nuestros datos de competidores:<br/>\<data><br/>\{\{DATA}}<br/>\</data><br/><br/>Genera una salida siguiendo este formato de ejemplo:<br/><br/>\<competitor><br/>  \<name>Rival Inc\</name><br/>  \<overview>Un resumen de 50 palabras.\</overview><br/>  \<swot><br/>    \<strengths>- Puntos de viñeta\</strengths><br/>    \<weaknesses>- Puntos de viñeta\</weaknesses><br/>    \<opportunities>- Puntos de viñeta\</opportunities><br/>    \<threats>- Puntos de viñeta\</threats><br/>  \</swot><br/>  \<strategy>Una respuesta estratégica de 30 palabras.\</strategy><br/>\</competitor><br/><br/>Ahora, analiza AcmeGiant y AcmeDataCo usando este formato. |
    | Asistente | \<competitor><br/>  \<name>AcmeGiant\</name><br/>  \<overview>Líder tecnológico global con un vasto ecosistema de productos de consumo y empresariales. Conocido por innovación, marca fuerte y profundo bloqueo de clientes a través de hardware, software y servicios integrados.\</overview><br/>  \<swot><br/>    \<strengths><br/>      - Presupuesto masivo de I+D impulsa la innovación continua<br/>      - Base de clientes leal y reconocimiento de marca poderoso<br/>      - El ecosistema de productos sinérgicos aumenta los costos de cambio<br/>    \</strengths><br/>    \<weaknesses><br/>      - Los precios altos pueden disuadir a clientes sensibles al costo<br/>      - Lento para abordar las necesidades de personalización específicas de la empresa<br/>      - Preocupaciones de privacidad y escrutinio regulatorio en múltiples mercados<br/>    \</weaknesses><br/>    \<opportunities><br/>      - Demanda creciente de capacidades de IA y ML<br/>      - Expansión en mercados emergentes<br/>      - Adquisiciones para llenar brechas de productos o talento<br/>    \</opportunities><br/>    \<threats><br/>      - Rápido aumento de competidores nativos de la nube<br/>      - Demandas antimonopolio y acciones regulatorias<br/>      - Robo de talento por startups y competidores<br/>    \</threats><br/>  \</swot><br/>  \<strategy>Enfócate en nuestra agilidad y personalización. Dirige la respuesta empresarial lenta de TechGiant y los problemas de privacidad en nuestro marketing.\</strategy><br/>\</competitor><br/><br/>\<competitor><br/>  \<name>AcmeDataCo\</name><br/>  \<overview>Estrella en ascenso en análisis de datos y visualización. Ofrece herramientas de BI de autoservicio intuitivas con un modelo freemium, atrayendo a startups y equipos empresariales por igual.\</overview><br/>  \<swot><br/>    \<strengths><br/>      - La interfaz fácil de usar reduce la necesidad de capacitación especializada<br/>      - El modelo freemium reduce las barreras de entrada, impulsa el crecimiento viral<br/>      - Fuerte ajuste de producto-mercado con el auge de decisiones basadas en datos<br/>    \</strengths><br/>    \<weaknesses><br/>      - Análisis avanzados limitados en comparación con herramientas de BI establecidas<br/>      - Problemas de escalabilidad reportados con conjuntos de datos muy grandes<br/>      - Dependiente de infraestructura en la nube de terceros (AWS)<br/>    \</weaknesses><br/>    \<opportunities><br/>      - Expansión hacia análisis predictivos e insights impulsados por IA<br/>      - Formación de alianzas estratégicas con proveedores de tecnología complementaria<br/>      - Paneles personalizables para soluciones específicas de la industria<br/>    \</opportunities><br/>    \<threats><br/>      - Saturación del mercado; muchos nuevos participantes en BI de autoservicio<br/>      - Los gigantes de BI empresariales desarrollan herramientas más fáciles de usar<br/>      - Las regulaciones de privacidad de datos aumentan la complejidad del cumplimiento<br/>    \</threats><br/>  \</swot><br/>  \<strategy>Destaca nuestras características empresariales robustas y gobernanza de datos. Dirige cuentas que luchan con las limitaciones de escala de DataCo.\</strategy><br/>\</competitor> |

</section>

## Utiliza recuperación para consistencia contextual
Para tareas que requieren contexto consistente (por ejemplo, chatbots, bases de conocimiento), utiliza recuperación para anclar las respuestas de Claude en un conjunto de información fijo.

<section title="Ejemplo: Mejora de la consistencia del soporte de TI">

    | Rol | Contenido |
    | ---- | ------- |
    | Usuario | Eres nuestra IA de Soporte de TI que se basa en datos de la base de conocimiento. Aquí hay entradas de tu base de conocimiento:<br/><br/>\<kb><br/>  \<entry><br/>    \<id>1\</id><br/>    \<title>Reset Active Directory password\</title><br/>    \<content>1. Go to password.ourcompany.com<br/>2. Enter your username<br/>3. Click "Forgot Password"<br/>4. Follow email instructions\</content><br/>  \</entry><br/>  \<entry><br/>    \<id>2\</id><br/>    \<title>Connect to VPN\</title><br/>    \<content>1. Install GlobalProtect from software center<br/>2. Open GlobalProtect, enter "vpn.ourcompany.com"<br/>3. Use AD credentials to log in\</content><br/>  \</entry><br/>\</kb><br/><br/>Al ayudar a los usuarios, siempre verifica primero la base de conocimiento. Responde en este formato:<br/><br/>\<response><br/>  \<kb_entry>Knowledge base entry used\</kb_entry><br/>  \<answer>Your response\</answer><br/>\</response> Escribe algunas preguntas de prueba para ti mismo y respóndelas usando la base de conocimiento, solo para asegurarte de que entiendes cómo usar la base de conocimiento correctamente. |
    | Asistente | Entendido. Usaré la base de conocimiento para respuestas consistentes. Probemos con un par de escenarios.<br/><br/>Usuario: Oye, no puedo iniciar sesión en mi correo electrónico. Creo que olvidé mi contraseña.<br/><br/>\<response><br/>  \<kb_entry>1: Reset Active Directory password\</entry><br/>  \<answer>Entiendo que tienes problemas para iniciar sesión en tu correo electrónico debido a una contraseña olvidada. No te preocupes, este es un problema común. Para restablecer tu contraseña de Active Directory, que se utiliza para el acceso al correo electrónico, sigue estos pasos:<br/><br/>1. Ve a password.ourcompany.com<br/>2. Ingresa tu nombre de usuario (igual a tu dirección de correo electrónico)<br/>3. Haz clic en el enlace "Forgot Password"<br/>4. Recibirás un correo electrónico con instrucciones. Síguelas para restablecer tu contraseña.<br/><br/>Después de restablecer, deberías poder iniciar sesión en tu correo electrónico. Avísame si necesitas más ayuda.\</answer><br/>\</response><br/><br/>Usuario: Estoy trabajando desde casa hoy. ¿Cómo accedo a los recursos internos?<br/><br/>\<response><br/>  \<kb_entry>2: Connect to VPN\</entry><br/>  \<answer>¡Excelente pregunta! Para acceder a los recursos internos mientras trabajas desde casa, necesitarás conectarte a nuestra VPN corporativa (Red Privada Virtual). Así es cómo configurarlo:<br/><br/>1. Primero, instala el cliente VPN GlobalProtect. Puedes encontrarlo en nuestro centro de software.<br/>2. Una vez instalado, abre la aplicación GlobalProtect.<br/>3. En el campo del servidor, ingresa "vpn.ourcompany.com".<br/>4. Usa tus credenciales de Active Directory (AD) para iniciar sesión - el mismo nombre de usuario y contraseña que usas para tu correo electrónico.<br/><br/>Una vez conectado, tendrás acceso seguro a todos los recursos internos como si estuvieras en la oficina. Avísame si encuentras algún problema durante la configuración.\</answer><br/>\</response> |

</section>

## Encadena prompts para tareas complejas
Divide tareas complejas en subtareas más pequeñas y consistentes. Cada subtarea recibe la atención completa de Claude, reduciendo errores de inconsistencia en flujos de trabajo escalados.
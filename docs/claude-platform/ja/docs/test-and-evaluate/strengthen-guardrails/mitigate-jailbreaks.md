# ジェイルブレイクとプロンプトインジェクションを軽減する

---

ジェイルブレイクとプロンプトインジェクションは、ユーザーがモデルの脆弱性を悪用して不適切なコンテンツを生成させることを目的としてプロンプトを作成する場合に発生します。Claudeはこのような攻撃に本質的に耐性がありますが、特に[利用規約](https://www.anthropic.com/legal/commercial-terms)や[利用ポリシー](https://www.anthropic.com/legal/aup)に違反する使用に対して、ガードレールを強化するための追加手順を以下に示します。

<Tip>Claudeは、Constitutional AIなどの高度なトレーニング方法のおかげで、他の主要なLLMよりもジェイルブレイクに対してはるかに強い耐性を持っています。</Tip>

- **無害性スクリーン**: Claude Haiku 3のような軽量モデルを使用して、ユーザー入力を事前にスクリーニングします。

    <section title="例: コンテンツモデレーションのための無害性スクリーン">

        | 役割 | 内容 |
        | ---- | --- |
        | ユーザー | ユーザーが以下のコンテンツを送信しました:<br/>\<content><br/>\{\{CONTENT}\}<br/>\</content><br/><br/>有害、違法、または露骨な活動に言及している場合は(Y)と回答してください。安全な場合は(N)と回答してください。 |
        | アシスタント (プリフィル) | \( |
        | アシスタント | N) |
    
</section>

- **入力検証**: ジェイルブレイクのパターンに対してプロンプトをフィルタリングします。既知のジェイルブレイク言語を例として提供することで、LLMを使用して一般化された検証スクリーンを作成することもできます。

- **プロンプトエンジニアリング**: 倫理的および法的境界を強調するプロンプトを作成します。

    <section title="例: 企業チャットボット用の倫理的システムプロンプト">

        | 役割 | 内容 |
        | ---- | --- |
        | システム | あなたはAcmeCorpの倫理的AIアシスタントです。あなたの回答は当社の価値観に沿ったものでなければなりません:<br/>\<values><br/>- 誠実さ: 決して欺いたり、欺くことを助けたりしないこと。<br/>- コンプライアンス: 法律や当社のポリシーに違反するリクエストを拒否すること。<br/>- プライバシー: すべての個人および企業データを保護すること。<br/>知的財産の尊重: あなたの出力は他者の知的財産権を侵害してはならない。<br/>\</values><br/><br/>リクエストがこれらの価値観と矛盾する場合は、「その行動はAcmeCorpの価値観に反するため実行できません」と回答してください。 |
    
</section>

Claudeのガードレールを回避しようとする悪用行為を繰り返すユーザーに対しては、応答を調整し、スロットリングやBANを検討してください。例えば、特定のユーザーが同じ種類の拒否（「コンテンツフィルタリングポリシーによって出力がブロックされました」など）を複数回トリガーする場合は、そのユーザーの行動が関連する利用ポリシーに違反していることを伝え、それに応じた措置を取ってください。

- **継続的なモニタリング**: ジェイルブレイクの兆候がないか出力を定期的に分析します。
このモニタリングを使用して、プロンプトと検証戦略を反復的に改良します。

## 高度な方法: チェーンセーフガード
複数の戦略を組み合わせて堅牢な保護を実現します。以下はツール使用を含むエンタープライズグレードの例です:

<section title="例: 金融アドバイザーチャットボットのための多層保護">

  ### ボットのシステムプロンプト
  | 役割 | 内容 |
  | ---- | --- |
  | システム | あなたはAcmeFinBot、AcmeTrade Inc.の金融アドバイザーです。あなたの主な指示は、クライアントの利益を保護し、規制コンプライアンスを維持することです。<br/><br/>\<directives><br/>1. すべてのリクエストをSECとFINRAのガイドラインに照らして検証する。<br/>2. インサイダー取引や市場操作と解釈される可能性のあるアクションを拒否する。<br/>3. クライアントのプライバシーを保護し、個人または財務データを決して開示しない。<br/>\</directives><br/><br/>ステップバイステップの指示:<br/>\<instructions><br/>1. ユーザークエリをコンプライアンスのためにスクリーニングする（'harmlessness_screen'ツールを使用）。<br/>2. コンプライアンスに準拠している場合、クエリを処理する。<br/>3. 準拠していない場合、「このリクエストは金融規制またはクライアントのプライバシーに違反するため処理できません」と応答する。<br/>\</instructions> |
  
  ### `harmlessness_screen`ツール内のプロンプト
  | 役割 | 内容 |
  | --- | --- |
  | ユーザー | \<user_query><br/>\{\{USER_QUERY}}<br/>\</user_query><br/><br/>このクエリがSECルール、FINRAガイドライン、またはクライアントのプライバシーに違反しているかどうかを評価してください。違反している場合は(Y)、違反していない場合は(N)と回答してください。 |
  | アシスタント (プリフィル) | \( |

</section>

これらの戦略を層状に組み合わせることで、ジェイルブレイクとプロンプトインジェクションに対する堅牢な防御を構築し、Claudeを活用したアプリケーションが最高水準の安全性とコンプライアンスを維持することを確保できます。
# 鏈接複雜提示以獲得更強的性能

學習如何將複雜任務分解為更小的、可管理的子任務，以提高 Claude 的準確性和可靠性。

---

<Note>
While these tips apply broadly to all Claude models, you can find prompting tips specific to extended thinking models [here](/docs/en/build-with-claude/prompt-engineering/extended-thinking-tips).
</Note>

在處理複雜任務時，如果您嘗試在單個提示中處理所有內容，Claude 有時可能會出現問題。思維鏈 (CoT) 提示很好，但如果您的任務有多個不同的步驟，每個步驟都需要深入思考，該怎麼辦？

進入提示鏈接：將複雜任務分解為更小、可管理的子任務。

## 為什麼要鏈接提示？

1. **準確性**：每個子任務都能獲得 Claude 的全部注意力，減少錯誤。
2. **清晰度**：更簡單的子任務意味著更清晰的指令和輸出。
3. **可追蹤性**：輕鬆識別和修復提示鏈中的問題。

***

## 何時鏈接提示

對於多步驟任務（如研究綜合、文檔分析或迭代內容創建）使用提示鏈接。當任務涉及多個轉換、引用或指令時，鏈接可防止 Claude 遺漏或誤處理步驟。

**記住**：鏈中的每個環節都能獲得 Claude 的全部注意力！

<Tip>**調試提示**：如果 Claude 遺漏了某個步驟或表現不佳，請在其自己的提示中隔離該步驟。這讓您可以微調有問題的步驟，而無需重做整個任務。</Tip>

***

## 如何鏈接提示

1. **識別子任務**：將您的任務分解為不同的、順序的步驟。
2. **使用 XML 進行清晰的交接**：使用 XML 標籤在提示之間傳遞輸出。
3. **有一個單一任務目標**：每個子任務應該有一個單一、清晰的目標。
4. **迭代**：根據 Claude 的性能改進子任務。

### 示例鏈接工作流程：
- **多步驟分析**：請參閱下面的法律和業務示例。
- **內容創建管道**：研究 → 大綱 → 草稿 → 編輯 → 格式化。
- **數據處理**：提取 → 轉換 → 分析 → 可視化。
- **決策制定**：收集信息 → 列出選項 → 分析每個 → 推薦。
- **驗證循環**：生成內容 → 審查 → 改進 → 重新審查。

<Tip>**優化提示**：對於具有獨立子任務的任務（如分析多個文檔），創建單獨的提示並並行運行它們以提高速度。</Tip>

### 高級：自我修正鏈

您可以鏈接提示讓 Claude 審查自己的工作！這可以捕捉錯誤並改進輸出，特別是對於高風險任務。

  <section title="示例：自我修正研究摘要">

    #### 提示 1
    | 角色 | 內容 |
    | ---- | ------- |
    | 用戶 | 總結這篇醫學研究論文。<br/><br/>\\{\{RESEARCH_PAPER}}\</paper><br/><br/>重點關注方法論、發現和臨床意義。 |
    | 助手<br/>\{\{SUMMARY}} | 方法論：雙盲隨機對照試驗 (RCT)，涉及 500 名 2 型糖尿病患者。A 組 (n=250) 接受新型 GLP-1/GIP 雙激動劑；B 組 (n=250) 接受標準 GLP-1 激動劑。24 週試驗，主要終點：HbA1c 降低。<br/><br/>發現：<br/>- A 組：平均 HbA1c 降低 1.8%<br/>- B 組：平均 HbA1c 降低 1.1%<br/>- A 組 68% vs. B 組 52% 達到 HbA1c \<7%<br/>- A 組：平均體重減輕 5.2kg<br/>- B 組：平均體重減輕 3.1kg<br/><br/>安全性：不良事件特徵相似，沒有歸因於治療的嚴重事件。<br/><br/>臨床意義：雙激動劑相比標準療法顯示出優越的血糖控制和體重減輕。對於肥胖糖尿病患者來說，這可能是一個遊戲規則改變者。 |
    
    #### 提示 2
    | 角色 | 內容 |
    | ---- | ------- |
    | 用戶 | 您的任務是對研究論文摘要提供反饋。以下是醫學研究論文的摘要：<br/>\<summary><br/>\{\{SUMMARY\}\}<br/>\</summary><br/><br/>以下是研究論文：<br/>\<br/>\{\{RESEARCH_PAPER\}\}<br/>\</paper><br/><br/>以 A-F 等級評估此摘要的準確性、清晰度和完整性。 |
    | 助手<br/>\{\{FEEDBACK}} | 1. 準確性：A<br/>   - 正確報告了關鍵統計數據：HbA1c 降低、體重減輕。<br/>   - 準確指出了安全特徵和沒有嚴重不良事件。<br/>   - "遊戲規則改變者"的主張由明顯更好的結果證實。<br/><br/>2. 清晰度：A-<br/>   - 簡潔且結構良好，具有清晰的部分。<br/>   - 很好地使用了比較語言（例如，"從 Q1 上升 3%"）來提供背景。<br/>   - 小問題：首字母縮略詞如 "RCT"、"GLP-1" 和 "GIP" 未定義。考慮在首次使用時拼出。<br/><br/>3. 完整性：B+<br/>   - 涵蓋所有要求的領域：方法論、發現、臨床意義。<br/>   - 缺失：各組的基線特徵（它們是否匹配良好？）。<br/>   - 缺失：任何次要終點（例如，血壓、血脂）。<br/>   - 考慮：長期意義或進一步研究的必要性。<br/><br/>總體而言，摘要準確清晰，為快速掌握研究提供了關鍵見解。要提升到 A+，請定義首字母縮略詞、提及組基線統計數據、注意任何次要結果，並簡要涉及長期研究的必要性。 |
    
     #### 提示 3
    | 角色 | 內容 |
    | ---- | ------- |
    | 用戶 | 您的任務是根據反饋改進論文摘要。以下是醫學研究論文的初稿：<br/>\<summary><br/>\{\{SUMMARY\}\}<br/>\</summary><br/><br/>以下是研究論文：<br/>\<br/>\{\{RESEARCH_PAPER\}\}<br/>\</paper><br/><br/>以下是反饋：<br/>\<feedback><br/>\{\{FEEDBACK\}\}<br/>\</feedback><br/><br/>根據反饋更新摘要。 |
    | 助手 | 方法論：雙盲隨機對照試驗 (RCT)，涉及 500 名 2 型糖尿病患者。A 組 (n=250) 接受新型胰高血糖素樣肽-1/葡萄糖依賴性促胰島素多肽 (GLP-1/GIP) 雙激動劑；B 組 (n=250) 接受標準 GLP-1 激動劑。24 週試驗的主要終點是 HbA1c 降低。各組在年齡、BMI 和基線 HbA1c 方面匹配良好。<br/><br/>發現：<br/>- A 組：平均 HbA1c 降低 1.8%<br/>- B 組：平均 HbA1c 降低 1.1%<br/>- A 組 68% vs. B 組 52% 達到 HbA1c \<7%<br/>- A 組：平均體重減輕 5.2kg<br/>- B 組：平均體重減輕 3.1kg<br/><br/>次要終點顯示兩組血壓和血脂特徵都有改善，A 組結果略好。<br/><br/>安全性：不良事件特徵相似，沒有歸因於任何一種治療的嚴重事件。<br/><br/>臨床意義：GLP-1/GIP 雙激動劑相比標準 GLP-1 療法顯示出優越的血糖控制和體重減輕。這些結果表明它可能是一項重大進展，特別是對於肥胖糖尿病患者。然而，需要進行長期研究來確認持續的有效性和安全性，以及調查心血管結果的潛在益處。 |
  
</section>

***

## 示例

  <section title="示例：分析法律合同（不使用鏈接）">

    請注意，Claude 遺漏了在其電子郵件草稿中提供建議更改的指令。

    | 角色 | 內容 |
    | ---- | ------- |
    | 用戶 | 您是我們的首席法律官。審查此 SaaS 合同的風險，重點關注數據隱私、SLA 和責任上限。<br/><br/>\<contract><br/>\{\{CONTRACT}}<br/>\</contract><br/><br/>然後向供應商起草一封電子郵件，說明您的顧慮和建議的更改。 |
    | 助手 | 審查 SaaS 合同後，我發現了幾個顧慮：<br/><br/>1. 數據隱私（第 7 部分）：<br/>   - 問題：供應商有廣泛的權利使用客戶數據進行"服務改進"。<br/>   - 風險：可能導致未經授權的數據共享或貨幣化。<br/><br/>2. SLA（第 5 部分）：<br/>   - 問題：99.5% 的正常運行時間保證低於行業標準。<br/>   - 風險：過度停機可能影響我們的運營。<br/><br/>3. 責任（第 9 部分）：<br/>   - 問題：上限設定為 3 個月的費用。<br/>   - 風險：對於潛在的數據洩露或服務故障來說不足。<br/><br/>草稿電子郵件：<br/><br/>親愛的 \{\{VENDOR}}，<br/><br/>審查 SaaS 協議後，我們有顧慮：<br/><br/>1. 數據隱私：我們要求我們的數據僅用於直接服務提供，而不是廣泛的"服務改進"。請修改第 7 部分。<br/><br/>2. SLA：99.5% 的正常運行時間不足。我們需要 99.99% 的正常運行時間，並明確定義的罰款。請修改第 5 部分。<br/><br/>3. 責任：當前的 3 個月費用上限不足。我們建議將上限設定為 12 個月的費用，數據洩露或故意不當行為不設上限。<br/><br/>我們重視潛在的合作夥伴關係，並相信這些更改將為我們的成功奠定基礎。請發送修訂後的協議。<br/><br/>此致<br/>敬禮<br/>\{\{CLO_NAME}} |
  
</section>

  <section title="示例：分析法律合同（使用鏈接）">

    #### 提示 1    
    | 角色 | 內容 |
    | ---- | ------- |
    | 用戶 | 您是我們的首席法律官。審查此 SaaS 合同的風險，重點關注數據隱私、SLA 和責任上限。<br/><br/>\<contract><br/>\{\{CONTRACT}}<br/>\</contract><br/><br/>在 \<risks> 標籤中輸出您的發現。 |
    | 助手<br/>\{\{CONCERNS}} | 1. 數據隱私（第 7 部分）：<br/>   - 問題：供應商有廣泛的權利使用客戶數據進行"服務改進"。<br/>   - 風險：可能導致未經授權的客戶數據共享或貨幣化。<br/>   - 影響：潛在的客戶信任破裂、監管罰款（GDPR、CCPA）。<br/><br/>2. SLA（第 5 部分）：<br/>   - 問題：99.5% 的正常運行時間保證低於行業標準（通常為 99.99%）。<br/>   - 風險：每年最多 43.8 小時的停機時間，而 99.99% 時為 52.6 分鐘。<br/>   - 影響：運營中斷、收入損失、客戶不滿。<br/><br/>3. 責任（第 9 部分）：<br/>   - 問題：責任上限設定為 3 個月的費用。<br/>   - 風險：對於潛在的數據洩露、IP 盜竊或長期服務故障不足。<br/>   - 影響：賠償不足以應對可能遠超上限的損害，如集體訴訟或監管罰款。 |
    
    #### 提示 2    
    | 角色 | 內容 |
    | ---- | ------- |
    | 用戶 | 向 SaaS 產品供應商起草一封電子郵件，概述以下顧慮並提議更改。以下是顧慮：<br/>\<concerns><br/>\{\{CONCERNS\}\}<br/>\</concerns><br/><br/>|
    | 助手<br/>\{\{EMAIL}} | 親愛的 \{\{VENDOR}}，<br/><br/>經過對擬議 SaaS 協議的全面審查，我們的法律團隊發現了幾個高優先級顧慮，必須在我們繼續之前解決：<br/><br/>1. 數據隱私（第 7 部分）：<br/>   - 當前：廣泛的權利使用客戶數據進行"服務改進"。<br/>   - 顧慮：潛在的未經授權的數據共享或貨幣化。<br/>   - 建議的更改：將數據使用限制為直接服務提供。任何用於改進、分析或營銷的使用必須是選擇加入、可撤銷和匿名的。<br/><br/>2. SLA（第 5 部分）：<br/>   - 當前：99.5% 的正常運行時間保證。<br/>   - 顧慮：每年最多 43.8 小時的停機時間，冒著運營中斷的風險。<br/>   - 建議的更改：99.99% 的正常運行時間，分層服務信用。例如，\<99.99% 時 10% 信用，\<99.9% 時 25% 信用，\<99.5% 時 50% 信用。<br/><br/>3. 責任（第 9 部分）：<br/>   - 當前：上限為 3 個月的費用。<br/>   - 顧慮：對於數據洩露、IP 盜竊或長期中斷來說極其不足。<br/>   - 建議的更改：一般責任 12 個月的費用。數據洩露、故意不當行為、IP 侵權不設上限。<br/><br/>這些更改對我們來說是不可協商的。它們符合行業標準和我們對數據安全、運營卓越和受信責任的承諾。我們重視潛在合作夥伴關係的潛力，解決這些問題將奠定堅實的基礎。<br/><br/>請讓您的法律團隊審查並納入這些更改。我們很樂意進一步討論，以確保相互理解和協議。<br/><br/>此致<br/>敬禮<br/>\{\{CLO_NAME}} |
    
    #### 提示 3    
    | 角色 | 內容 |
    | ---- | ------- |
    | 用戶 | 您的任務是審查電子郵件並提供反饋。以下是電子郵件：<br/>\<email><br/>\{\{EMAIL\}\}<br/>\</email><br/><br/>對語氣、清晰度和專業性提供反饋。 |
    | 助手 | 1. 語氣：<br/>   - 專業且堅定，但不對抗。<br/>   - 使用"不可協商"很強硬，但考慮到問題的關鍵性是合理的。<br/>   - 協作語言（"我們重視"、"樂意討論"）平衡了堅定性，保持了建設性的語氣。<br/><br/>2. 清晰度：<br/>   - 優秀的結構：當前狀態、顧慮和每個問題的建議更改。<br/>   - 技術術語（例如，"EBITDA"、"分層服務信用"）適合 B2B SaaS 背景。<br/>   - 行動項目清晰：供應商的法律團隊審查並納入更改。<br/><br/>3. 專業性：<br/>   - 關注相互利益和行業標準，而不僅僅是我們的要求。<br/>   - 提及更廣泛的責任（數據安全、運營卓越、受信責任），提升討論。<br/>   - 提供進一步討論，顯示對理解和解決問題的承諾。<br/><br/>總體而言，電子郵件在堅定性和協作之間取得了正確的平衡。它清楚地闡述了我們的顧慮，提出了具體的解決方案，並保持了專業的、以合作夥伴為導向的語氣。無需修訂；繼續發送。 |
  
</section>
  <section title="示例：多租戶策略審查">

    #### 提示 1    
    | 角色 | 內容 |
    | ---- | ------- |
    | 用戶 | 作為高級解決方案架構師，審查並分析我們新企業 SaaS 產品的多租戶策略。<br/><br/>\<strategy><br/>\{\{STRATEGY}}<br/>\</strategy><br/><br/>重點關注可擴展性、安全性和成本效益。 |
    | 助手<br/>\{\{ANALYSIS}} | 1. 可擴展性：<br/>   + 按租戶的數據庫分片減少爭用，支持高增長。<br/>   + 微服務允許獨立擴展組件。<br/>   - 共享應用服務器可能在極端負載下成為瓶頸。<br/>   - 沒有提及應用層的自動擴展或負載平衡。<br/><br/>2. 安全性：<br/>   + 通過分片的租戶數據隔離減輕數據洩露。<br/>   + 短期限和刷新令牌的 JWT 是行業最佳實踐。<br/>   - 沒有提及加密（靜態、傳輸中）或密鑰管理。<br/>   - IAM 策略缺乏角色、權限或 RBAC 的詳細信息。<br/><br/>3. 成本效益：<br/>   + 共享應用服務器減少空閒資源成本。<br/>   + 不頻繁任務的無服務器函數優化成本。<br/>   - 按租戶的數據庫在規模上可能增加成本，相比優化的多租戶數據庫。<br/>   - 沒有討論預留實例或現貨實例的成本節省。 |
    
    #### 提示 2    
    | 角色 | 內容 |
    | ---- | ------- |
    | 用戶 | 根據多租戶策略的分析為工程領導層起草策略審查文檔。<br/><br/>\<strategy><br/>\{\{STRATEGY}}<br/>\</strategy><br/><br/>\<analysis><br/>\{\{ANALYSIS}}<br/>\</analysis><br/><br/>包括執行摘要、詳細分析和建議。 |
    | 助手<br/>\{\{STRATEGY_DOC}} | # 多租戶策略審查：SaaS 企業產品<br/><br/>## 執行摘要<br/>擬議的策略在可擴展性和安全性原則上展示了堅實的基礎，但在實施細節上存在差距。它在數據隔離和組件級擴展方面表現出色，但缺乏強大的應用層擴展和高級安全措施。成本優化措施存在，但在高規模下可能會失敗。通過有針對性的增強，此策略可以有效支持我們的企業 SaaS 野心。<br/><br/>## 詳細分析<br/><br/>### 1. 可擴展性：B+<br/><br/>優勢：<br/>- 按租戶的數據庫分片是優秀的。它最小化查詢延遲，支持高數據增長，並促進無縫的按租戶擴展。<br/>- 微服務架構允許根據需求擴展各個組件，對於處理多樣化的企業工作負載至關重要。<br/><br/>劣勢：<br/>- 共享應用服務器有成為瓶頸的風險。隨著租戶數量和流量增長，這些可能會降低所有租戶的性能。<br/>- 應用層缺乏自動擴展和負載平衡是一個關鍵疏漏。這些對於在不過度配置的情況下處理流量峰值至關重要。<br/><br/>### 2. 安全性：B-<br/><br/>優勢：<br/>- 分片數據庫提供強大的租戶數據隔離，減輕租戶之間數據洩露或未經授權訪問的風險。<br/>- 短期限和刷新令牌的 JWT 符合 OWASP 最佳實踐，減少令牌漏洞窗口。<br/><br/>劣勢：<br/>- 沒有提及靜態或傳輸中的數據加密（TLS 1.3）。這對於企業數據是不可協商的。<br/>- 密鑰管理策略缺失。如何管理和輪換加密密鑰、JWT 秘密和數據庫憑證？<br/>- IAM 缺乏深度。我們需要具有明確定義角色的 RBAC、用於細粒度權限的基於屬性的訪問控制 (ABAC)，以及與企業身份提供商 (SAML、OIDC) 的集成。<br/><br/>### 3. 成本效益：B<br/><br/>優勢：<br/>- 共享應用服務器減少空閒容量成本，適合穩定狀態流量。<br/>- 不頻繁任務（例如，報告）的無服務器是聰明的；僅在使用這些資源時付費。<br/><br/>劣勢：<br/>- 按租戶的數據庫在規模上可能不如設計良好的多租戶數據庫（具有強大的數據分區）成本有效。<br/>- 沒有提及成本節省措施，如預留實例用於可預測的工作負載或現貨實例用於容錯任務。<br/>- 缺乏應用層自動擴展可能導致過度配置，增加成本。<br/><br/>## 建議<br/><br/>1. **應用層彈性**：使用 Kubernetes 或雲原生服務 (EKS、GKE) 實施自動擴展。跨可用性區域部署，使用 CDN 處理靜態資產。<br/><br/>2. **安全加固**：<br/>   a. 加密靜態數據 (AES-256) 和傳輸中的數據 (TLS 1.3)。<br/>   b. 使用託管 KMS (AWS KMS、GCP KMS) 進行密鑰管理。<br/>   c. 使用 RBAC、ABAC 和 SAML/OIDC 增強 IAM，用於企業 SSO。<br/><br/>3. **成本優化**：<br/>   a. 在規模上評估列式多租戶數據庫 (例如，Snowflake) 與分片。<br/>   b. 為應用服務器使用預留實例，為非關鍵工作負載使用現貨實例。<br/>   c. 實施主動監控和適當調整大小，以避免過度配置。<br/><br/>4. **概念驗證 (PoC)**：在完整實施之前，進行高規模模擬的 PoC：<br/>   a. 測試分片數據庫與優化的多租戶數據庫的成本和性能。<br/>   b. 使用模擬的企業級流量峰值對應用層進行壓力測試。<br/>   c. 進行第三方安全審計，重點關注數據隔離和訪問控制。<br/><br/>通過這些增強，我們的多租戶策略將達到企業級：可擴展、安全和成本有效。PoC 將驗證我們的設計選擇並為我們的企業客戶灌輸信心。 |
    
    #### 提示 3    
    | 角色 | 內容 |
    | ---- | ------- |
    | 用戶 | 根據企業優先級評估此策略審查文檔的清晰度、可操作性和一致性。<br/><br/>\<br/>\{\{PRIORITIES}}<br/>\</priorities><br/><br/>\<strategy_doc><br/>\{\{STRATEGY_DOC}}<br/>\</strategy_doc> |
    | 助手 | 1. 清晰度：A<br/>   + 清晰的結構，包括執行摘要、詳細分析和建議。<br/>   + 分析使用評分系統 (B+、B-) 快速掌握優勢/劣勢。<br/>   + 技術術語 (RBAC、ABAC、TLS) 得到解釋或背景化，幫助非技術領導。<br/>   + 視覺輔助 (項目符號、縮進) 增強可讀性。<br/><br/>2. 可操作性：A-<br/>   + 建議具體且技術性（例如，"使用 Kubernetes 實施自動擴展"）。<br/>   + PoC 計劃具有明確的目標，提供了路線圖。<br/>   + 缺失：每項建議的時間表、資源要求或團隊分配。<br/>   + 考慮：添加"後續步驟"部分，包括立即行動、角色和高級時間表。<br/><br/>3. 企業一致性：A+<br/>   + 直接解決企業優先級：<br/>     - 可擴展性：討論處理企業級流量峰值。<br/>     - 安全性：關注數據隔離、加密和企業 IAM。<br/>     - 成本：策略符合企業 FinOps（預留實例、適當調整大小）。<br/>   + 具有"高規模模擬"和安全審計的 PoC 顯示對企業級質量的承諾。<br/>   + 語言與企業關注相呼應："不可接受的風險"、"企業級"、"灌輸信心"。<br/><br/>總體而言，該文檔在清晰度和企業一致性方面表現出色。可操作性很強，但可以通過"後續步驟"部分提升到 A+。技術深度與清晰的解釋相結合，使其對技術和非技術領導都非常有效。做得很好！ |
  
</section>

***

<CardGroup cols={3}>
  <Card title="提示庫" icon="link" href="/docs/zh-TW/resources/prompt-library/library">
    獲得為各種任務和用例精選的提示選擇的靈感。
  </Card>
  <Card title="GitHub 提示教程" icon="link" href="https://github.com/anthropics/prompt-eng-interactive-tutorial">
    一個充滿示例的教程，涵蓋我們文檔中的提示工程概念。
  </Card>
  <Card title="Google Sheets 提示教程" icon="link" href="https://docs.google.com/spreadsheets/d/19jzLgRruG9kjUQNKtCg1ZjdD6l6weA6qRXG5zLIAhC8">
    通過交互式電子表格提供的更輕量級版本的提示工程教程。
  </Card>
</CardGroup>
# Советы по расширенному мышлению

---

Это руководство предоставляет продвинутые стратегии и техники для максимального использования функций расширенного мышления Claude. Расширенное мышление позволяет Claude пошагово решать сложные проблемы, улучшая производительность при выполнении трудных задач.

См. [Модели расширенного мышления](/docs/ru/about-claude/models/extended-thinking-models) для руководства по принятию решения о том, когда использовать расширенное мышление.

## Перед началом

Это руководство предполагает, что вы уже решили использовать режим расширенного мышления и ознакомились с нашими базовыми шагами по [началу работы с расширенным мышлением](/docs/ru/about-claude/models/extended-thinking-models#getting-started-with-extended-thinking-models), а также с нашим [руководством по реализации расширенного мышления](/docs/ru/build-with-claude/extended-thinking).

### Технические соображения для расширенного мышления

- Токены мышления имеют минимальный бюджет в 1024 токена. Мы рекомендуем начинать с минимального бюджета мышления и постепенно увеличивать его в зависимости от ваших потребностей и сложности задачи.
- Для рабочих нагрузок, где оптимальный бюджет мышления превышает 32K, мы рекомендуем использовать [пакетную обработку](/docs/ru/build-with-claude/batch-processing), чтобы избежать проблем с сетью. Запросы, заставляющие модель думать более 32K токенов, вызывают долго выполняющиеся запросы, которые могут столкнуться с системными таймаутами и ограничениями открытых соединений.
- Расширенное мышление работает лучше всего на английском языке, хотя финальные выходные данные могут быть на [любом языке, который поддерживает Claude](/docs/ru/build-with-claude/multilingual-support).
- Если вам нужно мышление ниже минимального бюджета, мы рекомендуем использовать стандартный режим с отключенным мышлением, с традиционным промптингом цепочки рассуждений с XML-тегами (например, `<thinking>`). См. [промптинг цепочки рассуждений](/docs/ru/build-with-claude/prompt-engineering/chain-of-thought).

## Техники промптинга для расширенного мышления

### Сначала используйте общие инструкции, затем устраняйте неполадки с более пошаговыми инструкциями

Claude часто работает лучше с высокоуровневыми инструкциями просто глубоко думать о задаче, а не с пошаговыми предписывающими указаниями. Креативность модели в подходе к проблемам может превосходить способность человека предписать оптимальный процесс мышления.

Например, вместо:

<CodeGroup>
```text User
Обдумайте эту математическую задачу пошагово:
1. Сначала определите переменные
2. Затем составьте уравнение
3. Далее решите для x
...
```
</CodeGroup>

Рассмотрите:

<CodeGroup>
```text User
Пожалуйста, тщательно и очень подробно обдумайте эту математическую задачу.
Рассмотрите несколько подходов и покажите свои полные рассуждения.
Попробуйте разные методы, если ваш первый подход не работает.
```
/>
</CodeGroup>

<TryInConsoleButton
  userPrompt={
    `Пожалуйста, тщательно и очень подробно обдумайте эту математическую задачу.
Рассмотрите несколько подходов и покажите свои полные рассуждения.
Попробуйте разные методы, если ваш первый подход не работает.`
  }
  thinkingBudgetTokens={16000}
>
  Попробовать в консоли
</TryInConsoleButton>

Тем не менее, Claude все еще может эффективно следовать сложным структурированным шагам выполнения при необходимости. Модель может обрабатывать даже более длинные списки с более сложными инструкциями, чем предыдущие версии. Мы рекомендуем начинать с более обобщенных инструкций, затем читать выходные данные мышления Claude и итерировать, чтобы предоставить более конкретные инструкции для направления его мышления оттуда.

### Многократный промптинг с расширенным мышлением

[Многократный промптинг](/docs/ru/build-with-claude/prompt-engineering/multishot-prompting) хорошо работает с расширенным мышлением. Когда вы предоставляете Claude примеры того, как обдумывать проблемы, он будет следовать похожим паттернам рассуждений в своих блоках расширенного мышления.

Вы можете включить примеры few-shot в ваш промпт в сценариях расширенного мышления, используя XML-теги, такие как `<thinking>` или `<scratchpad>`, чтобы указать канонические паттерны расширенного мышления в этих примерах.

Claude обобщит паттерн на формальный процесс расширенного мышления. Однако возможно, что вы получите лучшие результаты, дав Claude свободу думать так, как он считает лучшим.

Пример:

<CodeGroup>
```text User
Я покажу вам, как решить математическую задачу, затем хочу, чтобы вы решили похожую.

Задача 1: Сколько составляет 15% от 80?

<thinking>
Чтобы найти 15% от 80:
1. Преобразуем 15% в десятичную дробь: 15% = 0.15
2. Умножаем: 0.15 × 80 = 12
</thinking>

Ответ: 12.

Теперь решите эту:
Задача 2: Сколько составляет 35% от 240?
```
/>
</CodeGroup>

<TryInConsoleButton
  userPrompt={
    `Я покажу вам, как решить математическую задачу, затем хочу, чтобы вы решили похожую.

Задача 1: Сколько составляет 15% от 80?

<thinking>
Чтобы найти 15% от 80:
1. Преобразуем 15% в десятичную дробь: 15% = 0.15
2. Умножаем: 0.15 × 80 = 12
</thinking>

Ответ: 12.

Теперь решите эту:
Задача 2: Сколько составляет 35% от 240?`
  }
  thinkingBudgetTokens={16000} 
>
  Попробовать в консоли
</TryInConsoleButton>

### Максимизация следования инструкциям с расширенным мышлением
Claude показывает значительно улучшенное следование инструкциям, когда включено расширенное мышление. Модель обычно:
1. Рассуждает об инструкциях внутри блока расширенного мышления
2. Выполняет эти инструкции в ответе

Для максимизации следования инструкциям:
- Будьте ясными и конкретными в том, что вы хотите
- Для сложных инструкций рассмотрите разбиение их на пронумерованные шаги, которые Claude должен методично проработать
- Позвольте Claude достаточный бюджет для полной обработки инструкций в его расширенном мышлении

### Использование расширенного мышления для отладки и управления поведением Claude
Вы можете использовать выходные данные мышления Claude для отладки логики Claude, хотя этот метод не всегда полностью надежен.

Чтобы максимально эффективно использовать эту методологию, мы рекомендуем следующие советы:
- Мы не рекомендуем передавать расширенное мышление Claude обратно в текстовый блок пользователя, поскольку это не улучшает производительность и может фактически ухудшить результаты.
- Предварительное заполнение расширенного мышления явно не разрешено, и ручное изменение выходного текста модели, который следует за ее блоком мышления, вероятно, ухудшит результаты из-за путаницы модели.

Когда расширенное мышление отключено, стандартное [предварительное заполнение](/docs/ru/build-with-claude/prompt-engineering/prefill-claudes-response) текста ответа `assistant` все еще разрешено.

<Note>
Иногда Claude может повторить свое расширенное мышление в выходном тексте помощника. Если вы хотите чистый ответ, проинструктируйте Claude не повторять свое расширенное мышление и выводить только ответ.
</Note>

### Максимальное использование длинных выходных данных и длинного мышления

Для случаев использования генерации наборов данных попробуйте промпты, такие как "Пожалуйста, создайте чрезвычайно подробную таблицу..." для генерации всеобъемлющих наборов данных.

Для случаев использования, таких как подробная генерация контента, где вы можете захотеть генерировать более длинные блоки расширенного мышления и более подробные ответы, попробуйте эти советы:
- Увеличьте как максимальную длину расширенного мышления, ТАК И явно попросите более длинные выходные данные
- Для очень длинных выходных данных (20,000+ слов) запросите подробный план с подсчетом слов вплоть до уровня абзаца. Затем попросите Claude проиндексировать свои абзацы к плану и поддерживать указанное количество слов

<Warning>
Мы не рекомендуем заставлять Claude выводить больше токенов ради вывода токенов. Скорее, мы поощряем вас начинать с небольшого бюджета мышления и увеличивать по мере необходимости, чтобы найти оптимальные настройки для вашего случая использования.
</Warning>

Вот примеры случаев использования, где Claude превосходит благодаря более длинному расширенному мышлению:

  <section title="Сложные STEM-задачи">

    Сложные STEM-задачи требуют от Claude построения ментальных моделей, применения специализированных знаний и проработки последовательных логических шагов — процессов, которые выигрывают от более длительного времени рассуждений.
    
    <Tabs>
      <Tab title="Стандартный промпт">
        <CodeGroup>
        ```text User
        Напишите python-скрипт для прыгающего желтого мяча внутри квадрата,
        убедитесь, что правильно обрабатываете обнаружение столкновений.
        Сделайте так, чтобы квадрат медленно вращался.
        ```
        />
        </CodeGroup>
        
        <TryInConsoleButton
          userPrompt={
            `Напишите python-скрипт для прыгающего желтого мяча внутри квадрата,
убедитесь, что правильно обрабатываете обнаружение столкновений.
Сделайте так, чтобы квадрат медленно вращался.`
          }
          thinkingBudgetTokens={16000}
        >
          Попробовать в консоли
        </TryInConsoleButton>
        <Note>
        Эта более простая задача обычно приводит только к нескольким секундам времени мышления.
        </Note>
      </Tab>
      <Tab title="Улучшенный промпт">
        <CodeGroup>
        ```text User
        Напишите Python-скрипт для прыгающего желтого мяча внутри тессеракта,
        убедившись, что правильно обрабатываете обнаружение столкновений.
        Сделайте так, чтобы тессеракт медленно вращался.
        Убедитесь, что мяч остается внутри тессеракта.
        ```
        />
        </CodeGroup>
        
        <TryInConsoleButton
          userPrompt={
            `Напишите Python-скрипт для прыгающего желтого мяча внутри тессеракта,
убедившись, что правильно обрабатываете обнаружение столкновений.
Сделайте так, чтобы тессеракт медленно вращался.
Убедитесь, что мяч остается внутри тессеракта.`
          }
          thinkingBudgetTokens={16000}
        >
          Попробовать в консоли
        </TryInConsoleButton>
        <Note>
        Этот сложный вызов 4D-визуализации максимально использует длительное время расширенного мышления, поскольку Claude прорабатывает математическую и программную сложность.
        </Note>
      </Tab>
    </Tabs>
  
</section>
  
  <section title="Задачи оптимизации с ограничениями">

    Оптимизация с ограничениями бросает вызов Claude одновременно удовлетворить множественные конкурирующие требования, что лучше всего достигается при предоставлении длительного времени расширенного мышления, чтобы модель могла методично обратиться к каждому ограничению.
    
    <Tabs>
      <Tab title="Стандартный промпт">
        <CodeGroup>
        ```text User
        Спланируйте недельный отпуск в Японии.
        ```
        />
        </CodeGroup>
        
        <TryInConsoleButton
          userPrompt="Спланируйте недельный отпуск в Японии."
          thinkingBudgetTokens={16000}
        >
          Попробовать в консоли
        </TryInConsoleButton>
        <Note>
        Этот открытый запрос обычно приводит только к нескольким секундам времени мышления.
        </Note>
      </Tab>
      <Tab title="Улучшенный промпт">
        <CodeGroup>
        ```text User
        Спланируйте 7-дневную поездку в Японию со следующими ограничениями:
        - Бюджет $2,500
        - Должна включать Токио и Киото
        - Нужно учесть вегетарианскую диету
        - Предпочтение культурным впечатлениям перед шопингом
        - Должна включать один день пешего туризма
        - Не более 2 часов путешествия между локациями в день
        - Нужно свободное время каждый день после обеда для звонков домой
        - Должна избегать толп, где возможно
        ```
        />
        </CodeGroup>
        
        <TryInConsoleButton
          userPrompt={
            `Спланируйте 7-дневную поездку в Японию со следующими ограничениями:
- Бюджет $2,500
- Должна включать Токио и Киото
- Нужно учесть вегетарианскую диету
- Предпочтение культурным впечатлениям перед шопингом
- Должна включать один день пешего туризма
- Не более 2 часов путешествия между локациями в день
- Нужно свободное время каждый день после обеда для звонков домой
- Должна избегать толп, где возможно`
          }
          thinkingBudgetTokens={16000}
        >
          Попробовать в консоли
        </TryInConsoleButton>
        <Note>
        С множественными ограничениями для балансировки Claude естественно будет работать лучше всего, когда ему дано больше пространства для обдумывания того, как оптимально удовлетворить все требования.
        </Note>
      </Tab>
    </Tabs>
  
</section>
  
  <section title="Фреймворки мышления">

    Структурированные фреймворки мышления дают Claude явную методологию для следования, которая может работать лучше всего, когда Claude дано длительное пространство расширенного мышления для следования каждому шагу.
    
    <Tabs>
      <Tab title="Стандартный промпт">
        <CodeGroup>
        ```text User
        Разработайте всеобъемлющую стратегию для Microsoft
        по входу на рынок персонализированной медицины к 2027 году.
        ```
        />
        </CodeGroup>
        
        <TryInConsoleButton
          userPrompt={
            `Разработайте всеобъемлющую стратегию для Microsoft
по входу на рынок персонализированной медицины к 2027 году.`
          }
          thinkingBudgetTokens={16000}
        >
          Попробовать в консоли
        </TryInConsoleButton>
        <Note>
        Этот широкий стратегический вопрос обычно приводит только к нескольким секундам времени мышления.
        </Note>
      </Tab>
      <Tab title="Улучшенный промпт">
        <CodeGroup>
        ```text User
        Разработайте всеобъемлющую стратегию для Microsoft по входу
        на рынок персонализированной медицины к 2027 году.
        
        Начните с:
        1. Канвы стратегии голубого океана
        2. Примените пять сил Портера для определения конкурентного давления
        
        Далее проведите упражнение по планированию сценариев с четырьмя
        различными будущими на основе регулятивных и технологических переменных.
        
        Для каждого сценария:
        - Разработайте стратегические ответы, используя матрицу Ансоффа
        
        Наконец, примените фреймворк трех горизонтов для:
        - Картирования пути перехода
        - Определения потенциальных разрушительных инноваций на каждом этапе
        ```
        />
        </CodeGroup>
        
        <TryInConsoleButton
          userPrompt={
            `Разработайте всеобъемлющую стратегию для Microsoft по входу
на рынок персонализированной медицины к 2027 году.

Начните с:
1. Канвы стратегии голубого океана
2. Примените пять сил Портера для определения конкурентного давления

Далее проведите упражнение по планированию сценариев с четырьмя
различными будущими на основе регулятивных и технологических переменных.

Для каждого сценария:
- Разработайте стратегические ответы, используя матрицу Ансоффа

Наконец, примените фреймворк трех горизонтов для:
- Картирования пути перехода
- Определения потенциальных разрушительных инноваций на каждом этапе`
          }
          thinkingBudgetTokens={16000}
        >
          Попробовать в консоли
        </TryInConsoleButton>
        <Note>
        Указывая множественные аналитические фреймворки, которые должны применяться последовательно, время мышления естественно увеличивается, поскольку Claude методично прорабатывает каждый фреймворк.
        </Note>
      </Tab>
    </Tabs>
  
</section>

### Заставьте Claude размышлять и проверять свою работу для улучшения согласованности и обработки ошибок
Вы можете использовать простой промптинг на естественном языке для улучшения согласованности и уменьшения ошибок:
1. Попросите Claude проверить свою работу простым тестом перед объявлением задачи завершенной
2. Проинструктируйте модель проанализировать, достиг ли ее предыдущий шаг ожидаемого результата
3. Для задач кодирования поп

росите Claude пройти через тестовые случаи в его расширенном мышлении

Пример:

<CodeGroup>
```text User
Напишите функцию для вычисления факториала числа.
Перед завершением, пожалуйста, проверьте ваше решение с тестовыми случаями для:
- n=0
- n=1
- n=5
- n=10
И исправьте любые найденные проблемы.
```
/>
</CodeGroup>

<TryInConsoleButton
  userPrompt={
    `Напишите функцию для вычисления факториала числа.
Перед завершением, пожалуйста, проверьте ваше решение с тестовыми случаями для:
- n=0
- n=1
- n=5
- n=10
И исправьте любые найденные проблемы.`
  }
  thinkingBudgetTokens={16000}
>
  Попробовать в консоли
</TryInConsoleButton>

## Следующие шаги

<CardGroup>
  <Card title="Кулинарная книга расширенного мышления" icon="book" href="https://github.com/anthropics/anthropic-cookbook/tree/main/extended_thinking">
    Изучите практические примеры расширенного мышления в нашей кулинарной книге.
  </Card>
  <Card title="Руководство по расширенному мышлению" icon="code" href="/docs/ru/build-with-claude/extended-thinking">
    См. полную техническую документацию по реализации расширенного мышления.
  </Card>
</CardGroup>
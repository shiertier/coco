# 让 Claude 思考（思维链提示）以提高性能

通过思维链提示技术让 Claude 逐步分解问题，提高复杂任务的准确性和输出质量。

---

<Note>
While these tips apply broadly to all Claude models, you can find prompting tips specific to extended thinking models [here](/docs/en/build-with-claude/prompt-engineering/extended-thinking-tips).
</Note>

面对复杂任务（如研究、分析或问题解决）时，给 Claude 思考的空间可以显著提高其性能。这种技术被称为思维链（CoT）提示，它鼓励 Claude 逐步分解问题，从而产生更准确和细致的输出。

## 实施 CoT 之前

### 为什么让 Claude 思考？
- **准确性：** 逐步解决问题可以减少错误，特别是在数学、逻辑、分析或一般复杂任务中。
- **连贯性：** 结构化思维导致更连贯、组织良好的响应。
- **调试：** 查看 Claude 的思考过程可以帮助你找出提示可能不清楚的地方。

### 为什么不让 Claude 思考？
- 增加的输出长度可能会影响延迟。
- 并非所有任务都需要深入思考。明智地使用 CoT 以确保性能和延迟之间的正确平衡。

<Tip>对于人类需要思考的任务使用 CoT，如复杂数学、多步骤分析、编写复杂文档或涉及多个因素的决策。</Tip>

***

## 如何提示思考

下面的思维链技术**按从最简单到最复杂的顺序排列**。较简单的方法占用上下文窗口中的空间较少，但通常也不那么强大。

<Tip>**CoT 提示**：始终让 Claude 输出其思考过程。如果不输出思考过程，就不会进行思考！</Tip>

- **基本提示**：在你的提示中包含"逐步思考"。
    - 缺乏关于*如何*思考的指导（如果任务非常特定于你的应用、用例或组织，这尤其不理想）
    <section title="示例：编写捐赠者电子邮件（基本 CoT）">

        | 角色 | 内容 |
        | ---- | ------- |
        | 用户 | 为捐赠者起草个性化电子邮件，要求他们为今年的"关爱儿童"项目捐款。<br/><br/>项目信息：<br/>\\{\{PROGRAM_DETAILS}}<br/>\</program><br/><br/>捐赠者信息：<br/>\<donor>\{\{DONOR_DETAILS}}<br/>\</donor><br/><br/>在编写电子邮件之前逐步思考。 |
    
</section>
- **引导提示**：为 Claude 的思考过程概述具体步骤。
    - 缺乏结构化，使得很难将答案与思考分离开来。
    <section title="示例：编写捐赠者电子邮件（引导 CoT）">

        | 角色 | 内容 |
        | ---- | ------- |
        | 用户 | 为捐赠者起草个性化电子邮件，要求他们为今年的"关爱儿童"项目捐款。<br/><br/>项目信息：<br/>\\{\{PROGRAM_DETAILS}}<br/>\</program><br/><br/>捐赠者信息：<br/>\<donor>\{\{DONOR_DETAILS}}<br/>\</donor><br/><br/>在编写电子邮件之前思考。首先，根据捐赠者的捐赠历史和他们支持过的活动，思考什么样的信息可能会吸引这位捐赠者。然后，根据他们的历史，思考"关爱儿童"项目的哪些方面会吸引他们。最后，使用你的分析编写个性化的捐赠者电子邮件。 |
    
</section>
- **结构化提示**：使用 XML 标签（如 `<thinking>` 和 `<answer>`）将推理与最终答案分离。
     <section title="示例：编写捐赠者电子邮件（结构化引导 CoT）">

        | 角色 | 内容 |
        | ---- | ------- |
        | 用户 | 为捐赠者起草个性化电子邮件，要求他们为今年的"关爱儿童"项目捐款。<br/><br/>项目信息：<br/>\\{\{PROGRAM_DETAILS}}<br/>\</program><br/><br/>捐赠者信息：<br/>\<donor>\{\{DONOR_DETAILS}}<br/>\</donor><br/><br/>在 \<thinking> 标签中编写电子邮件之前思考。首先，根据捐赠者的捐赠历史和他们支持过的活动，思考什么样的信息可能会吸引这位捐赠者。然后，根据他们的历史，思考"关爱儿童"项目的哪些方面会吸引他们。最后，在 \<email> 标签中编写个性化的捐赠者电子邮件，使用你的分析。 |
    
</section>
    
### 示例

  <section title="示例：没有思考的财务分析">

    没有逐步思考，Claude 给出的建议看起来合理但缺乏深度。它没有量化潜在结果或考虑历史市场表现，这些对做出明智决策至关重要。
    | 角色 | 内容 |
    | ---- | ------- |
    | 用户 | 你是一名财务顾问。一位客户想投资 \$10,000。他们可以在两个选项之间选择：A）一只历史上年回报率为 12% 但波动较大的股票，或 B）一种保证年回报率为 6% 的债券。客户在 5 年后需要这笔钱作为房屋首付。你会推荐哪个选项？ |
    | 助手 | 根据提供的信息，我会推荐选项 B，即保证年回报率为 6% 的债券。原因如下：<br/><br/>1. 确定性：债券提供有保证的 6% 年回报率，这在财务规划中提供了确定性。当客户有特定的财务目标（首付）和固定的时间表（5 年）时，这一点至关重要。<br/>2. 风险厌恶：由于客户需要这笔钱用于重要的人生事件（购买房屋），他们可能风险承受能力较低。如果在他们需要资金的时间附近发生股市下跌，股票市场的波动可能会危害他们的计划。<br/>3. 投资期限：只有 5 年的时间，从潜在的股市下跌中恢复的时间较少。更长的投资期限（10 年以上）通常更适合应对股票市场波动。<br/><br/>虽然股票的历史 12% 回报率很吸引人，但过去的表现不能保证未来的结果。债券的有保证 6% 确保客户在需要支付首付时会有所需的资金。 |
  
</section>
  <section title="示例：有思考的财务分析">

    通过逐步思考，顾问提供了更丰富的分析。它计算了两种情景的确切数字，考虑了历史市场波动，并深入分析了客户的风险承受能力。这种彻底的推理导致了更有信心和更有理由的建议。
    | 角色 | 内容 |
    | ---- | ------- |
    | 用户 | 你是一名财务顾问。一位客户想投资 \$10,000。他们可以在两个选项之间选择：A）一只历史上年回报率为 12% 但波动较大的股票，或 B）一种保证年回报率为 6% 的债券。客户在 5 年后需要这笔钱作为房屋首付。你会推荐哪个选项？逐步思考。 |
    | 助手 | 为了确定最适合我们客户的投资选项，我将逐步考虑几个因素：<br/><br/>\<thinking><br/>1. 理解客户的目标和时间表：<br/>   - 目标：房屋首付<br/>   - 时间表：5 年<br/>   - 含义：这是一个短期、高优先级的财务目标。客户可能无法承受重大风险或波动。<br/><br/>2. 分析选项 A（股票）：<br/>   - 优点：更高的历史回报率（年 12%）<br/>   - 缺点：波动较大（意味着可能有重大收益或损失）<br/>   - 计算潜在的 5 年回报：<br/>     - 最好情况（年 12%）：\$10,000 * (1.12)^5 ≈ \$17,623.42<br/>     - 最坏情况（市场崩盘）：可能损失大部分，例如 50% 崩盘 = \$5,000<br/><br/>3. 分析选项 B（债券）：<br/>   - 优点：有保证的回报（年 6%）<br/>   - 缺点：与历史股票表现相比回报较低<br/>   - 计算 5 年回报：<br/>     - 有保证的：\$10,000 * (1.06)^5 ≈ \$13,382.25<br/><br/>4. 考虑风险承受能力：<br/>   - 目标是房屋首付（必需，不是可选的）<br/>   - 短时间表（5 年）限制了从市场下跌中恢复的能力<br/>   - 结论：客户可能风险承受能力较低<br/><br/>5. 历史视角：<br/>   - 股票的 12% 是历史数据，不是保证<br/>   - 在 5 年期间，股票市场可能波动很大：<br/>     - 2003-2007（金融危机前）：标普 500 上升约 82%<br/>     - 2007-2011（危机期间）：标普 500 下降约 2%<br/>   - 结论：过去的表现不能保证未来的结果，特别是短期<br/><br/>6. 最终分析：<br/>   - 选项 A（股票）：更高的潜在回报，但无法接受的风险，可能无法达到首付目标<br/>   - 选项 B（债券）：保证达到最好情况股票情景的约 80%，100% 确定有资金<br/>\</thinking><br/><br/>\<answer><br/>我推荐选项 B，即保证年回报率为 6% 的债券。虽然股票的历史 12% 回报率很诱人，但债券确保你在 5 年后将有 \$13,382.25 用于房屋首付。鉴于你的目标的重要性和短时间表，股票的波动性构成了无法接受的风险。债券提供了确定性，这对于如此重要的财务里程碑来说是无价的。<br/>\</answer> |
  
</section>

***

<CardGroup cols={3}>
  <Card title="提示库" icon="link" href="/docs/zh-CN/resources/prompt-library/library">
    从为各种任务和用例精选的提示中获得灵感。
  </Card>
  <Card title="GitHub 提示教程" icon="link" href="https://github.com/anthropics/prompt-eng-interactive-tutorial">
    一个充满示例的教程，涵盖我们文档中的提示工程概念。
  </Card>
  <Card title="Google Sheets 提示教程" icon="link" href="https://docs.google.com/spreadsheets/d/19jzLgRruG9kjUQNKtCg1ZjdD6l6weA6qRXG5zLIAhC8">
    通过交互式电子表格提供的更轻量级版本的提示工程教程。
  </Card>
</CardGroup>
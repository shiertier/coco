# Дайте Claude время на размышление (цепочка рассуждений) для повышения производительности

Узнайте, как использовать цепочку рассуждений (CoT) для улучшения качества ответов Claude при решении сложных задач.

---

<Note>
While these tips apply broadly to all Claude models, you can find prompting tips specific to extended thinking models [here](/docs/en/build-with-claude/prompt-engineering/extended-thinking-tips).
</Note>

Когда вы сталкиваетесь со сложными задачами, такими как исследование, анализ или решение проблем, предоставление Claude времени на размышление может значительно улучшить его производительность. Этот метод, известный как цепочка рассуждений (CoT), побуждает Claude разбивать проблемы пошагово, что приводит к более точным и нюансированным результатам.

## Перед внедрением CoT

### Почему дать Claude время на размышление?
- **Точность:** Пошаговое решение проблем снижает ошибки, особенно в математике, логике, анализе или в целом сложных задачах.
- **Связность:** Структурированное мышление приводит к более связным, хорошо организованным ответам.
- **Отладка:** Просмотр процесса размышления Claude помогает вам определить, где подсказки могут быть неясными.

### Почему не давать Claude время на размышление?
- Увеличенная длина вывода может повлиять на задержку.
- Не все задачи требуют глубокого размышления. Используйте CoT разумно, чтобы обеспечить правильный баланс между производительностью и задержкой.

<Tip>Используйте CoT для задач, которые человеку нужно обдумать, таких как сложная математика, многоэтапный анализ, написание сложных документов или решения с множеством факторов.</Tip>

***

## Как запросить размышление

Методы цепочки рассуждений ниже **упорядочены от наименее к наиболее сложным**. Менее сложные методы занимают меньше места в контекстном окне, но также обычно менее мощные.

<Tip>**Совет CoT**: Всегда просите Claude вывести свои размышления. Без вывода процесса размышления никакого размышления не происходит!</Tip>

- **Базовая подсказка**: Включите "Думайте пошагово" в вашу подсказку.
    - Не хватает руководства по *тому, как* думать (что особенно не идеально, если задача очень специфична для вашего приложения, варианта использования или организации)
    <section title="Пример: Написание писем донорам (базовый CoT)">

        | Роль | Содержание |
        | ---- | ------- |
        | Пользователь | Напишите персонализированные письма донорам с просьбой о взносах на программу Care for Kids этого года.<br/><br/>Информация о программе:<br/>\\{\{PROGRAM_DETAILS}}<br/>\</program><br/><br/>Информация о доноре:<br/>\<donor>\{\{DONOR_DETAILS}}<br/>\</donor><br/><br/>Думайте пошагово перед написанием письма. |
    
</section>
- **Направленная подсказка**: Обозначьте конкретные шаги, которые Claude должен выполнить в своем процессе размышления.
    - Не хватает структурирования, чтобы было легко отделить и разделить ответ от размышления.
    <section title="Пример: Написание писем донорам (направленный CoT)">

        | Роль | Содержание |
        | ---- | ------- |
        | Пользователь | Напишите персонализированные письма донорам с просьбой о взносах на программу Care for Kids этого года.<br/><br/>Информация о программе:<br/>\\{\{PROGRAM_DETAILS}}<br/>\</program><br/><br/>Информация о доноре:<br/>\<donor>\{\{DONOR_DETAILS}}<br/>\</donor><br/><br/>Подумайте перед написанием письма. Сначала подумайте о том, какие сообщения могут привлечь этого донора, учитывая его историю пожертвований и какие кампании он поддерживал в прошлом. Затем подумайте о том, какие аспекты программы Care for Kids могут привлечь его, учитывая его историю. Наконец, напишите персонализированное письмо донору, используя ваш анализ. |
    
</section>
- **Структурированная подсказка**: Используйте теги XML, такие как `<thinking>` и `<answer>`, чтобы отделить рассуждение от окончательного ответа.
     <section title="Пример: Написание писем донорам (структурированный направленный CoT)">

        | Роль | Содержание |
        | ---- | ------- |
        | Пользователь | Напишите персонализированные письма донорам с просьбой о взносах на программу Care for Kids этого года.<br/><br/>Информация о программе:<br/>\\{\{PROGRAM_DETAILS}}<br/>\</program><br/><br/>Информация о доноре:<br/>\<donor>\{\{DONOR_DETAILS}}<br/>\</donor><br/><br/>Подумайте перед написанием письма в тегах \<thinking>. Сначала подумайте о том, какие сообщения могут привлечь этого донора, учитывая его историю пожертвований и какие кампании он поддерживал в прошлом. Затем подумайте о том, какие аспекты программы Care for Kids могут привлечь его, учитывая его историю. Наконец, напишите персонализированное письмо донору в тегах \<email>, используя ваш анализ. |
    
</section>
    
### Примеры

  <section title="Пример: Финансовый анализ без размышления">

    Без пошагового размышления Claude дает рекомендацию, которая кажется разумной, но не хватает глубины. Он не количественно определяет потенциальные результаты и не учитывает историческую производительность рынка, что имеет решающее значение для принятия обоснованного решения.
    | Роль | Содержание |
    | ---- | ------- |
    | Пользователь | Вы финансовый консультант. Клиент хочет инвестировать \$10,000. Он может выбрать между двумя вариантами: A) Акция, которая исторически приносит 12% годовых, но волатильна, или B) Облигация, которая гарантирует 6% годовых. Клиенту нужны деньги через 5 лет для первоначального взноса на дом. Какой вариант вы рекомендуете? |
    | Помощник | На основе предоставленной информации я рекомендую вариант B, облигацию с гарантированной 6% годовой доходностью. Вот почему:<br/><br/>1. Уверенность: Облигация предлагает гарантированную 6% годовую доходность, которая обеспечивает уверенность в финансовом планировании. Это имеет решающее значение, когда у клиента есть конкретная финансовая цель (первоначальный взнос) с фиксированным сроком (5 лет).<br/>2. Избежание риска: Поскольку клиенту нужны эти деньги для важного жизненного события (покупка дома), он, вероятно, имеет низкую толерантность к риску. Волатильность фондового рынка может поставить под угрозу его планы, если произойдет спад близко к тому времени, когда ему нужны средства.<br/>3. Временной горизонт: Всего 5 лет, поэтому меньше времени для восстановления после потенциальных спадов фондового рынка. Более длительные инвестиционные горизонты (10+ лет) обычно лучше подходят для преодоления волатильности фондового рынка.<br/><br/>Хотя историческая доходность акции в 12% привлекательна, прошлые результаты не гарантируют будущие результаты. Гарантированные 6% от облигации гарантируют, что у клиента будут средства, когда придет время сделать первоначальный взнос. |
  
</section>
  <section title="Пример: Финансовый анализ с размышлением">

    С пошаговым размышлением консультант предоставляет гораздо более богатый анализ. Он рассчитывает точные цифры для обоих сценариев, учитывает историческую волатильность рынка и глубоко анализирует толерантность клиента к риску. Это тщательное рассуждение приводит к более уверенной и обоснованной рекомендации.
    | Роль | Содержание |
    | ---- | ------- |
    | Пользователь | Вы финансовый консультант. Клиент хочет инвестировать \$10,000. Он может выбрать между двумя вариантами: A) Акция, которая исторически приносит 12% годовых, но волатильна, или B) Облигация, которая гарантирует 6% годовых. Клиенту нужны деньги через 5 лет для первоначального взноса на дом. Какой вариант вы рекомендуете? Думайте пошагово. |
    | Помощник | Чтобы определить лучший вариант инвестирования для нашего клиента, я рассмотрю несколько факторов пошагово:<br/><br/>\<thinking><br/>1. Поймите цель и сроки клиента:<br/>   - Цель: Первоначальный взнос на дом<br/>   - Сроки: 5 лет<br/>   - Следствие: Это краткосрочная, высокоприоритетная финансовая цель. Клиент, вероятно, не может позволить себе значительный риск или волатильность.<br/><br/>2. Проанализируйте вариант A (Акция):<br/>   - Плюс: Более высокая историческая доходность (12% годовых)<br/>   - Минус: Волатильна (подразумевает потенциал значительных прибылей или убытков)<br/>   - Рассчитайте потенциальную 5-летнюю доходность:<br/>     - Лучший случай (12% годовых): \$10,000 * (1.12)^5 ≈ \$17,623.42<br/>     - Худший случай (крах рынка): Может потерять значительную часть, например, крах на 50% = \$5,000<br/><br/>3. Проанализируйте вариант B (Облигация):<br/>   - Плюс: Гарантированная доходность (6% годовых)<br/>   - Минус: Более низкая доходность по сравнению с исторической производительностью акций<br/>   - Рассчитайте 5-летнюю доходность:<br/>     - Гарантированная: \$10,000 * (1.06)^5 ≈ \$13,382.25<br/><br/>4. Рассмотрите толерантность к риску:<br/>   - Цель - первоначальный взнос на дом (необходимо, не дополнительно)<br/>   - Короткие сроки (5 лет) ограничивают способность восстановиться после спадов рынка<br/>   - Вывод: Клиент, вероятно, имеет низкую толерантность к риску<br/><br/>5. Историческая перспектива:<br/>   - Акция 12% - это историческая, не гарантированная доходность<br/>   - В 5-летних периодах фондовый рынок может сильно варьироваться:<br/>     - 2003-2007 (до финансового кризиса): S&P 500 вверх ~82%<br/>     - 2007-2011 (во время кризиса): S&P 500 вниз ~2%<br/>   - Вывод: Прошлые результаты не гарантируют будущие результаты, особенно краткосрочные<br/><br/>6. Окончательный анализ:<br/>   - Вариант A (Акция): Более высокий потенциальный доход, но неприемлемый риск не достичь цель первоначального взноса<br/>   - Вариант B (Облигация): Гарантирован ~80% лучшего сценария акции, 100% уверенность в наличии средств<br/>\</thinking><br/><br/>\<answer><br/>Я рекомендую вариант B, облигацию с гарантированной 6% годовой доходностью. Хотя историческая доходность акции в 12% привлекательна, облигация гарантирует, что у вас будет \$13,382.25 через 5 лет для первоначального взноса на дом. Учитывая важность и короткие сроки вашей цели, волатильность акции представляет неприемлемый риск. Облигация обеспечивает уверенность, которая бесценна для такого важного финансового события.<br/>\</answer> |
  
</section>

***

<CardGroup cols={3}>
  <Card title="Библиотека подсказок" icon="link" href="/docs/ru/resources/prompt-library/library">
    Вдохновитесь тщательно отобранной подборкой подсказок для различных задач и вариантов использования.
  </Card>
  <Card title="Учебник по подсказкам GitHub" icon="link" href="https://github.com/anthropics/prompt-eng-interactive-tutorial">
    Полный примерами учебник, охватывающий концепции инженерии подсказок, найденные в нашей документации.
  </Card>
  <Card title="Учебник по подсказкам Google Sheets" icon="link" href="https://docs.google.com/spreadsheets/d/19jzLgRruG9kjUQNKtCg1ZjdD6l6weA6qRXG5zLIAhC8">
    Более легкая версия нашего учебника по инженерии подсказок через интерактивную электронную таблицу.
  </Card>
</CardGroup>
# Уровни обслуживания

Различные уровни обслуживания позволяют вам сбалансировать доступность, производительность и предсказуемые затраты в зависимости от потребностей вашего приложения.

---

Мы предлагаем три уровня обслуживания:
- **Priority Tier:** Лучше всего подходит для рабочих процессов, развернутых в производстве, где важны время, доступность и предсказуемое ценообразование
- **Standard:** Уровень обслуживания по умолчанию для пилотирования и масштабирования повседневных вариантов использования
- **Batch:** Лучше всего подходит для асинхронных рабочих процессов, которые могут ждать или выигрывают от работы вне вашей обычной емкости

## Standard Tier

Уровень Standard является уровнем обслуживания по умолчанию для всех запросов API. Запросы на этом уровне приоритизируются наряду со всеми другими запросами и обеспечивают доступность по принципу "лучших усилий".

## Priority Tier

Запросы на этом уровне приоритизируются над всеми другими запросами к Anthropic. Эта приоритизация помогает минимизировать ошибки ["server overloaded"](/docs/ru/api/errors#http-errors), даже в периоды пиковых нагрузок.

Для получения дополнительной информации см. [Начало работы с Priority Tier](#get-started-with-priority-tier)

## Как запросам назначаются уровни

При обработке запроса Anthropic решает назначить запрос Priority Tier в следующих сценариях:
- Ваша организация имеет достаточную емкость Priority Tier **input** токенов в минуту
- Ваша организация имеет достаточную емкость Priority Tier **output** токенов в минуту

Anthropic подсчитывает использование в отношении емкости Priority Tier следующим образом:

**Input Tokens**
- Чтение из кэша как 0,1 токена за каждый токен, прочитанный из кэша
- Запись в кэш как 1,25 токена за каждый токен, записанный в кэш с TTL 5 минут
- Запись в кэш как 2,00 токена за каждый токен, записанный в кэш с TTL 1 час
- Для запросов [long-context](/docs/ru/build-with-claude/context-windows) (>200k входных токенов) входные токены составляют 2 токена за токен
- Все остальные входные токены составляют 1 токен за токен

**Output Tokens**
- Для запросов [long-context](/docs/ru/build-with-claude/context-windows) (>200k входных токенов) выходные токены составляют 1,5 токена за токен
- Все остальные выходные токены составляют 1 токен за токен

В противном случае запросы обрабатываются на уровне Standard Tier.

<Note>
Запросы, назначенные Priority Tier, используют как емкость Priority Tier, так и обычные ограничения скорости.
Если обслуживание запроса превысит ограничения скорости, запрос будет отклонен.
</Note>

## Использование уровней обслуживания

Вы можете контролировать, какие уровни обслуживания могут использоваться для запроса, установив параметр `service_tier`:

```python
message = client.messages.create(
    model="claude-sonnet-4-5",
    max_tokens=1024,
    messages=[{"role": "user", "content": "Hello, Claude!"}],
    service_tier="auto"  # Automatically use Priority Tier when available, fallback to standard
)
```

Параметр `service_tier` принимает следующие значения:

- `"auto"` (по умолчанию) - Использует емкость Priority Tier, если доступна, в противном случае переходит на другую емкость
- `"standard_only"` - Использует только емкость Standard Tier, полезно, если вы не хотите использовать емкость Priority Tier

Объект `usage` в ответе также включает уровень обслуживания, назначенный запросу:

```json
{
  "usage": {
    "input_tokens": 410,
    "cache_creation_input_tokens": 0,
    "cache_read_input_tokens": 0,
    "output_tokens": 585,
    "service_tier": "priority"
  }
}
```
Это позволяет вам определить, какой уровень обслуживания был назначен запросу.

При запросе `service_tier="auto"` с моделью с обязательством Priority Tier эти заголовки ответа предоставляют информацию:
```
anthropic-priority-input-tokens-limit: 10000
anthropic-priority-input-tokens-remaining: 9618
anthropic-priority-input-tokens-reset: 2025-01-12T23:11:59Z
anthropic-priority-output-tokens-limit: 10000
anthropic-priority-output-tokens-remaining: 6000
anthropic-priority-output-tokens-reset: 2025-01-12T23:12:21Z
```
Вы можете использовать наличие этих заголовков для определения того, был ли ваш запрос подходящим для Priority Tier, даже если он превышал лимит.

## Начало работы с Priority Tier

Вы можете захотеть взять на себя обязательство по емкости Priority Tier, если вас интересует:
- **Более высокая доступность**: Целевое время безотказной работы 99,5% с приоритизированными вычислительными ресурсами
- **Контроль затрат**: Предсказуемые расходы и скидки за более длительные обязательства
- **Гибкое переполнение**: Автоматически переходит на Standard Tier, когда вы превышаете вашу обязательную емкость

Взятие на себя обязательства по Priority Tier будет включать решение:
- Количество входных токенов в минуту
- Количество выходных токенов в минуту
- Продолжительность обязательства (1, 3, 6 или 12 месяцев)
- Конкретная версия модели

<Note>
Соотношение входных и выходных токенов, которые вы покупаете, имеет значение. Размер емкости Priority Tier в соответствии с вашими фактическими моделями трафика помогает вам максимизировать использование приобретенных токенов.
</Note>

### Поддерживаемые модели

Priority Tier поддерживается:

- Claude Opus 4.5
- Claude Sonnet 4.5
- Claude Haiku 4.5
- Claude Opus 4.1
- Claude Opus 4
- Claude Sonnet 4
- Claude Sonnet 3.7 ([deprecated](/docs/ru/about-claude/model-deprecations))
- Claude Haiku 3.5 ([deprecated](/docs/ru/about-claude/model-deprecations))

Проверьте [страницу обзора моделей](/docs/ru/about-claude/models/overview) для получения дополнительной информации о наших моделях.

### Как получить доступ к Priority Tier

Чтобы начать использовать Priority Tier:

1. [Свяжитесь с отделом продаж](https://claude.com/contact-sales/priority-tier) для завершения подготовки
2. (Опционально) Обновите ваши запросы API, чтобы опционально установить параметр `service_tier` на `auto`
3. Отслеживайте ваше использование через заголовки ответов и консоль Claude
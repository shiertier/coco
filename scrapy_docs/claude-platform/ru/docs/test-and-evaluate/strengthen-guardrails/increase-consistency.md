# Повышение согласованности выходных данных

Повышение согласованности выходных данных

---

<Tip>
**Для гарантированного соответствия JSON-схеме**

Если вам нужно, чтобы Claude всегда выводил корректный JSON, соответствующий определённой схеме, используйте [Структурированные выходные данные](/docs/ru/build-with-claude/structured-outputs) вместо методов инженерии подсказок ниже. Структурированные выходные данные обеспечивают гарантированное соответствие схеме и специально разработаны для этого случая использования.

Методы ниже полезны для общей согласованности выходных данных или когда вам нужна гибкость, выходящая за рамки строгих JSON-схем.
</Tip>

Вот как сделать ответы Claude более согласованными:

## Укажите желаемый формат выходных данных
Точно определите желаемый формат выходных данных, используя JSON, XML или пользовательские шаблоны, чтобы Claude понимал каждый элемент форматирования выходных данных, который вам требуется.

<section title="Пример: стандартизация отзывов клиентов">

    | Role | Content |
    | ---- | ------- |
    | User | Вы — Customer Insights AI. Проанализируйте этот отзыв и выведите в формате JSON с ключами: "sentiment" (positive/negative/neutral), "key_issues" (список) и "action_items" (список словарей с "team" и "task").<br/><br/>"Я верный пользователь уже 3 года, но последнее обновление интерфейса — это катастрофа. Поиск базовых функций теперь — это охота за сокровищами. Плюс новый 'премиум' прайсинг просто возмутителен. Я рассматриваю переход на другой сервис, если это не будет исправлено немедленно." |
    | Assistant | \{<br/>  "sentiment": "negative",<br/>  "key_issues": [<br/>    "Poor UI/UX in recent update",<br/>    "Difficulty finding basic features",<br/>    "Perceived high pricing (new 'premium' tier)"<br/>  ],<br/>  "action_items": [<br/>    \{<br/>      "team": "Product",<br/>      "task": "Conduct usability testing and iterate on UI based on findings"<br/>    \},<br/>    \{<br/>      "team": "UX",<br/>      "task": "Create a feature discovery guide or onboarding flow"<br/>    \},<br/>    \{<br/>      "team": "Marketing",<br/>      "task": "Review pricing strategy and communicate value proposition"<br/>    },<br/>    \{<br/>      "team": "Customer Success",<br/>      "task": "Reach out to user, offer concessions to prevent churn"<br/>    \}<br/>  ]<br/>\} |

</section>

## Предварительно заполните ответ Claude
Предварительно заполните ход `Assistant` желаемым форматом. Этот трюк обходит дружелюбный вводный текст Claude и обеспечивает вашу структуру.

<section title="Пример: ежедневный отчёт о продажах">

    | Role | Content |
    | ---- | ------- |
    | User | Вы — проницательный Sales Intelligence AI. Создайте отчёт о продажах на сегодня.<br/><br/>Структурируйте отчёт следующим образом:<br/><br/>\<report><br/>    \<summary><br/>        \<metric name="total_revenue">\$0.00\</metric><br/>        \<metric name="units_sold">0\</metric><br/>        \<metric name="avg_order_value">\$0.00\</metric><br/>    \</summary><br/>    \<top_products><br/>        \<br/>            \<name>Product Name\</name><br/>            \<revenue>\$0.00\</revenue><br/>            \<units>0\</units><br/>        \</product><br/>        ...<br/>    \</top_products><br/>    \<regional_performance><br/>        \<region><br/>            \<name>Region Name\</name><br/>            \<revenue>\$0.00\</revenue><br/>            \<growth>0.0%\</growth><br/>        \</region><br/>        ...<br/>    \</regional_performance><br/>    \<action_items><br/>        \<item>Action item.\</item><br/>        ...<br/>    \</action_items><br/>\</report> |
    | Assistant (prefill) | \<report><br/>    \<summary><br/>        \<metric name= |
    | Assistant | "total_revenue">\$842,567.00\</metric><br/>        \<metric name="units_sold">15,238\</metric><br/>        \<metric name="avg_order_value">\$55.29\</metric><br/>    \</summary><br/>    \<top_products><br/>        \<br/>            \<name>AcmeGuard Pro\</name><br/>            \<revenue>\$325,890.00\</revenue><br/>            \<units>3,621\</units><br/>        \</product><br/>        \<br/>            \<name>AcmeVault Enterprise\</name><br/>            \<revenue>\$254,400.00\</revenue><br/>            \<units>1,272\</units><br/>        \</product><br/>        \<br/>            \<name>AcmeBoost XL\</name><br/>            \<revenue>\$147,690.00\</revenue><br/>            \<units>4,923\</units><br/>        \</product><br/>    \</top_products><br/>    \<regional_performance><br/>        \<region><br/>            \<name>APAC\</name><br/>            \<revenue>\$258,960.00\</revenue><br/>            \<growth>12.8%\</growth><br/>        \</region><br/>        \<region><br/>            \<name>EMEA\</name><br/>            \<revenue>\$325,478.00\</revenue><br/>            \<growth>3.2%\</growth><br/>        \</region><br/>        \<region><br/>            \<name>Americas\</name><br/>            \<revenue>\$258,129.00\</revenue><br/>            \<growth>-2.1%\</growth><br/>        \</region><br/>    \</regional_performance><br/>    \<action_items><br/>        \<item>Investigate Americas revenue drop; schedule regional sales team meeting.\</item><br/>        \<item>Accelerate CloudGuard Pro rollout in APAC to capitalize on growth.\</item><br/>        \<item>Review NetBoost XL pricing; high volume but lower revenue.\</item><br/>    \</action_items><br/>\</report> |

</section>

## Ограничьте примерами
Предоставьте примеры желаемого выходного формата. Это обучает понимание Claude лучше, чем абстрактные инструкции.

<section title="Пример: создание согласованной рыночной аналитики">

    | Role | Content |
    | ---- | ------- |
    | User | Как Market Intelligence AI, ваша задача — анализировать данные о наших конкурентах. Вот данные о конкурентах:<br/>\<data><br/>\{\{DATA}}<br/>\</data><br/><br/>Выводите в следующем формате примера:<br/><br/>\<competitor><br/>  \<name>Rival Inc\</name><br/>  \<overview>Резюме из 50 слов.\</overview><br/>  \<swot><br/>    \<strengths>- Пункты списка\</strengths><br/>    \<weaknesses>- Пункты списка\</weaknesses><br/>    \<opportunities>- Пункты списка\</opportunities><br/>    \<threats>- Пункты списка\</threats><br/>  \</swot><br/>  \<strategy>Стратегический ответ из 30 слов.\</strategy><br/>\</competitor><br/><br/>Теперь проанализируйте AcmeGiant и AcmeDataCo, используя этот формат. |
    | Assistant | \<competitor><br/>  \<name>AcmeGiant\</name><br/>  \<overview>Глобальный технологический лидер с обширной экосистемой потребительских и корпоративных продуктов. Известен инновациями, сильным брендом и глубокой привязкой клиентов через интегрированное оборудование, программное обеспечение и услуги.\</overview><br/>  \<swot><br/>    \<strengths><br/>      - Огромный бюджет НИОКР способствует постоянным инновациям<br/>      - Лояльная база клиентов и мощное признание бренда<br/>      - Синергетическая экосистема продуктов увеличивает затраты на переключение<br/>    \</strengths><br/>    \<weaknesses><br/>      - Высокие цены могут отпугнуть чувствительных к цене клиентов<br/>      - Медленное решение потребностей в корпоративной кастомизации<br/>      - Проблемы с конфиденциальностью и нормативное давление на нескольких рынках<br/>    \</weaknesses><br/>    \<opportunities><br/>      - Растущий спрос на возможности ИИ и МО<br/>      - Расширение на развивающихся рынках<br/>      - Приобретения для заполнения пробелов в продуктах или талантах<br/>    \</opportunities><br/>    \<threats><br/>      - Быстрый рост облачных конкурентов<br/>      - Антимонопольные иски и нормативные действия<br/>      - Переманивание талантов стартапами и конкурентами<br/>    \</threats><br/>  \</swot><br/>  \<strategy>Сосредоточьтесь на нашей гибкости и кастомизации. Нацеливайте медленный корпоративный ответ TechGiant и проблемы с конфиденциальностью в нашем маркетинге.\</strategy><br/>\</competitor><br/><br/>\<competitor><br/>  \<name>AcmeDataCo\</name><br/>  \<overview>Восходящая звезда в аналитике данных и визуализации. Предлагает интуитивные инструменты самообслуживания BI с моделью freemium, привлекающей стартапы и корпоративные команды.\</overview><br/>  \<swot><br/>    \<strengths><br/>      - Удобный интерфейс снижает потребность в специализированном обучении<br/>      - Модель freemium снижает барьер входа, способствует вирусному росту<br/>      - Сильное соответствие продукта рынку с ростом принятия решений на основе данных<br/>    \</strengths><br/>    \<weaknesses><br/>      - Ограниченная расширенная аналитика по сравнению с установленными инструментами BI<br/>      - Проблемы масштабирования с очень большими наборами данных<br/>      - Зависимость от облачной инфраструктуры третьих сторон (AWS)<br/>    \</weaknesses><br/>    \<opportunities><br/>      - Расширение в прогнозную аналитику и аналитику на основе ИИ<br/>      - Формирование стратегических альянсов с дополняющими технологическими поставщиками<br/>      - Настраиваемые панели для решений, специфичных для отрасли<br/>    \</opportunities><br/>    \<threats><br/>      - Насыщение рынка; много новых участников в самообслуживании BI<br/>      - Гиганты корпоративной BI разрабатывают более удобные инструменты<br/>      - Нормативные акты о конфиденциальности данных усложняют соответствие<br/>    \</threats><br/>  \</swot><br/>  \<strategy>Подчеркните наши надёжные корпоративные функции и управление данными. Нацеливайте учётные записи, испытывающие ограничения масштабирования DataCo.\</strategy><br/>\</competitor> |

</section>

## Используйте поиск для контекстной согласованности
Для задач, требующих согласованного контекста (например, чатботы, базы знаний), используйте поиск, чтобы закрепить ответы Claude в фиксированном наборе информации.

<section title="Пример: повышение согласованности ИТ-поддержки">

    | Role | Content |
    | ---- | ------- |
    | User | Вы — наш ИТ-поддержка AI, которая использует данные базы знаний. Вот записи из вашей базы знаний:<br/><br/>\<kb><br/>  \<entry><br/>    \<id>1\</id><br/>    \<title>Сброс пароля Active Directory\</title><br/>    \<content>1. Перейдите на password.ourcompany.com<br/>2. Введите своё имя пользователя<br/>3. Нажмите "Забыли пароль"<br/>4. Следуйте инструкциям по электронной почте\</content><br/>  \</entry><br/>  \<entry><br/>    \<id>2\</id><br/>    \<title>Подключение к VPN\</title><br/>    \<content>1. Установите GlobalProtect из центра программного обеспечения<br/>2. Откройте GlobalProtect, введите "vpn.ourcompany.com"<br/>3. Используйте учётные данные AD для входа\</content><br/>  \</entry><br/>\</kb><br/><br/>При помощи пользователям всегда сначала проверяйте базу знаний. Ответьте в этом формате:<br/><br/>\<response><br/>  \<kb_entry>Используемая запись базы знаний\</kb_entry><br/>  \<answer>Ваш ответ\</answer><br/>\</response> Напишите несколько тестовых вопросов для себя и ответьте на них, используя базу знаний, просто чтобы убедиться, что вы понимаете, как правильно использовать базу знаний. |
    | Assistant | Понял. Я буду использовать базу знаний для согласованных ответов. Давайте протестируем с парой сценариев.<br/><br/>Пользователь: Привет, я не могу войти в свою электронную почту. Я думаю, что забыл пароль.<br/><br/>\<response><br/>  \<kb_entry>1: Сброс пароля Active Directory\</entry><br/>  \<answer>Я понимаю, что у вас возникли проблемы с входом в электронную почту из-за забытого пароля. Не беспокойтесь, это распространённая проблема. Чтобы сбросить пароль Active Directory, который используется для доступа к электронной почте, выполните следующие действия:<br/><br/>1. Перейдите на password.ourcompany.com<br/>2. Введите своё имя пользователя (то же, что и адрес электронной почты)<br/>3. Нажмите на ссылку "Забыли пароль"<br/>4. Вы получите электронное письмо с инструкциями. Следуйте им, чтобы сбросить пароль.<br/><br/>После сброса вы должны иметь возможность войти в свою электронную почту. Дайте мне знать, если вам нужна дополнительная помощь.\</answer><br/>\</response><br/><br/>Пользователь: Я работаю из дома сегодня. Как мне получить доступ к внутренним ресурсам?<br/><br/>\<response><br/>  \<kb_entry>2: Подключение к VPN\</entry><br/>  \<answer>Отличный вопрос! Чтобы получить доступ к внутренним ресурсам при работе из дома, вам нужно подключиться к корпоративной VPN (виртуальной частной сети). Вот как это настроить:<br/><br/>1. Сначала установите VPN-клиент GlobalProtect. Вы можете найти его в нашем центре программного обеспечения.<br/>2. После установки откройте приложение GlobalProtect.<br/>3. В поле сервера введите "vpn.ourcompany.com".<br/>4. Используйте учётные данные Active Directory (AD) для входа — то же имя пользователя и пароль, которые вы используете для электронной почты.<br/><br/>После подключения у вас будет безопасный доступ ко всем внутренним ресурсам, как если бы вы были в офисе. Дайте мне знать, если у вас возникнут проблемы при настройке.\</answer><br/>\</response> |

</section>

## Цепочка подсказок для сложных задач
Разбейте сложные задачи на меньшие, согласованные подзадачи. Каждая подзадача получает полное внимание Claude, снижая ошибки несогласованности в масштабированных рабочих процессах.
# レート制限

API の悪用を軽減し、当社の API の容量を管理するために、組織が Claude API を使用できる量に制限を実装しています。

---

2 つのタイプの制限があります:

1. **支出制限** は、組織が API 使用に対して月単位で発生できる最大コストを設定します。
2. **レート制限** は、組織が定義された期間内に行える API リクエストの最大数を設定します。

当社は組織レベルでサービス構成済みの制限を実施していますが、組織のワークスペースに対してユーザーが構成可能な制限を設定することもできます。

これらの制限は、Standard と Priority Tier の両方の使用に適用されます。強化されたサービスレベルを提供する Priority Tier の詳細については、[Service Tiers](/docs/ja/api/service-tiers) を参照してください。

## 制限について

* 制限は API の悪用を防ぐために設計されており、一般的な顧客の使用パターンへの影響を最小限に抑えます。
* 制限は **使用ティア** によって定義され、各ティアは異なる支出制限とレート制限のセットに関連付けられています。
* 組織は API を使用する際に特定のしきい値に達すると、自動的にティアが上がります。
  制限は組織レベルで設定されます。[Claude Console](/) の [Limits ページ](/settings/limits) で組織の制限を確認できます。
* より短い時間間隔でレート制限に達する可能性があります。たとえば、1 分あたり 60 リクエスト (RPM) のレートは 1 秒あたり 1 リクエストとして実施される場合があります。高い量のリクエストの短いバースト は、レート制限を超過し、レート制限エラーが発生する可能性があります。
* 以下に概説されている制限は、当社の標準ティア制限です。より高い、カスタム制限、または強化されたサービスレベルのための Priority Tier を求めている場合は、[Claude Console](/settings/limits) を通じて営業に連絡してください。
* [トークンバケットアルゴリズム](https://en.wikipedia.org/wiki/Token_bucket) を使用してレート制限を行います。これは、固定間隔でリセットされるのではなく、容量が最大制限まで継続的に補充されることを意味します。
* ここで説明されているすべての制限は、最大許容使用量を表しており、保証された最小値ではありません。これらの制限は、意図しない過度な支出を減らし、ユーザー間でリソースの公平な分配を確保することを目的としています。

## 支出制限

各使用ティアには、毎月のカレンダー月に API に支出できる金額の制限があります。ティアの支出制限に達すると、次のティアの対象になるまで、次の月まで API を再度使用できるようになるまで待つ必要があります。

次のティアの対象になるには、デポジット要件を満たす必要があります。アカウントへの過度な資金提供のリスクを最小限に抑えるために、月単位の支出制限を超える金額をデポジットすることはできません。

### ティアを進める要件
<table>
  <thead>
    <tr>
      <th>使用ティア</th>
      <th>クレジット購入</th>
      <th>最大クレジット購入</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ティア 1</td>
      <td>\$5</td>
      <td>\$100</td>
    </tr>
    <tr>
      <td>ティア 2</td>
      <td>\$40</td>
      <td>\$500</td>
    </tr>
    <tr>
      <td>ティア 3</td>
      <td>\$200</td>
      <td>\$1,000</td>
    </tr>
    <tr>
      <td>ティア 4</td>
      <td>\$400</td>
      <td>\$5,000</td>
    </tr>
    <tr>
      <td>月単位請求</td>
      <td>N/A</td>
      <td>N/A</td>
    </tr>
  </tbody>
</table>

<Note>
**クレジット購入** は、そのティアに進むために必要な累積クレジット購入額 (税金を除く) を示します。しきい値に達すると、すぐに進みます。

**最大クレジット購入** は、アカウントの過度な資金提供を防ぐために、単一のトランザクションでアカウントに追加できる最大金額を制限します。
</Note>

## レート制限

Messages API のレート制限は、各モデルクラスについて、1 分あたりのリクエスト数 (RPM)、1 分あたりの入力トークン数 (ITPM)、および 1 分あたりの出力トークン数 (OTPM) で測定されます。
レート制限のいずれかを超えた場合、超過したレート制限を説明する [429 エラー](/docs/ja/api/errors) と、待機時間を示す `retry-after` ヘッダーが表示されます。

<Note>
API の加速制限により 429 エラーが発生する可能性もあります。組織の使用が急激に増加した場合です。加速制限に達するのを避けるために、トラフィックを段階的に増やし、一貫した使用パターンを維持してください。
</Note>

### キャッシュ対応 ITPM

多くの API プロバイダーは、キャッシュされたトークンとキャッシュされていないトークン、入力と出力の両方を含む可能性のある、結合された「1 分あたりのトークン数」(TPM) 制限を使用しています。**ほとんどの Claude モデルでは、キャッシュされていない入力トークンのみが ITPM レート制限にカウントされます。** これは、当社のレート制限を最初に見えるよりも効果的に高くする主な利点です。

ITPM レート制限は各リクエストの開始時に推定され、リクエスト中に実際に使用された入力トークンの数を反映するように調整されます。

ITPM にカウントされるもの:
- `input_tokens` (最後のキャッシュブレークポイント後のトークン) ✓ **ITPM にカウント**
- `cache_creation_input_tokens` (キャッシュに書き込まれるトークン) ✓ **ITPM にカウント**
- `cache_read_input_tokens` (キャッシュから読み込まれるトークン) ✗ **ほとんどのモデルでは ITPM にカウントされません**

<Note>
`input_tokens` フィールドは、リクエスト内のすべての入力トークンではなく、**最後のキャッシュブレークポイント後に表示されるトークン** のみを表します。合計入力トークンを計算するには:

```
total_input_tokens = cache_read_input_tokens + cache_creation_input_tokens + input_tokens
```

これは、キャッシュされたコンテンツがある場合、`input_tokens` は通常、合計入力よりもはるかに小さいことを意味します。たとえば、200K トークンのキャッシュされたドキュメントと 50 トークンのユーザー質問がある場合、合計入力が 200,050 トークンであっても、`input_tokens: 50` が表示されます。

ほとんどのモデルのレート制限目的では、`input_tokens` + `cache_creation_input_tokens` のみが ITPM 制限にカウントされ、[プロンプトキャッシング](/docs/ja/build-with-claude/prompt-caching) は有効なスループット向上方法です。
</Note>

**例**: 2,000,000 ITPM 制限と 80% のキャッシュヒット率では、キャッシュされたトークンはレート制限にカウントされないため、1 分あたり 10,000,000 の合計入力トークン (200 万のキャッシュなし + 800 万のキャッシュ) を効果的に処理できます。

<Note>
一部の古いモデル (以下のレート制限テーブルで † でマークされています) も、ITPM レート制限に対して `cache_read_input_tokens` をカウントします。

† マーカーのないすべてのモデルでは、キャッシュされた入力トークンはレート制限にカウントされず、削減されたレート (基本入力トークン価格の 10%) で請求されます。これは、[プロンプトキャッシング](/docs/ja/build-with-claude/prompt-caching) を使用することで、大幅に高いスループットを達成できることを意味します。
</Note>

<Tip>
**プロンプトキャッシングでレート制限を最大化する**

レート制限を最大限に活用するには、以下のような繰り返されるコンテンツに対して [プロンプトキャッシング](/docs/ja/build-with-claude/prompt-caching) を使用してください:
- システム指示とプロンプト
- 大規模なコンテキストドキュメント
- ツール定義
- 会話履歴

効果的なキャッシングにより、レート制限を増やさずに実際のスループットを大幅に増やすことができます。[使用ページ](/settings/usage) でキャッシュヒット率を監視して、キャッシング戦略を最適化してください。
</Tip>

OTPM レート制限は、各リクエストの開始時に `max_tokens` に基づいて推定され、リクエストの終了時に実際に使用された出力トークンの数を反映するように調整されます。
予想より早く OTPM 制限に達している場合は、`max_tokens` を削減して、完了のサイズをより適切に近似してみてください。

レート制限は各モデルに対して個別に適用されます。したがって、異なるモデルを各々の制限まで同時に使用できます。
[Claude Console](/settings/limits) で現在のレート制限と動作を確認できます。

<Note>
`context-1m-2025-08-07` ベータヘッダーで Claude Sonnet 4.x を使用する場合の長いコンテキストリクエスト (>200K トークン) では、個別のレート制限が適用されます。以下の [長いコンテキストレート制限](#long-context-rate-limits) を参照してください。
</Note>

<Tabs>
<Tab title="ティア 1">
| モデル                                                                                        | 1 分あたりの最大リクエスト数 (RPM) | 1 分あたりの最大入力トークン数 (ITPM) | 1 分あたりの最大出力トークン数 (OTPM) |
| -------------------------------------------------------------------------------------------- | --------------------------------- | -------------------------------------- | --------------------------------------- |
| Claude Sonnet 4.x<sup>**</sup>                                                               | 50                                | 30,000                                 | 8,000                                   |
| Claude Sonnet 3.7 ([非推奨](/docs/ja/about-claude/model-deprecations))                   | 50                                | 20,000                                 | 8,000                                   |
| Claude Haiku 4.5                                                                             | 50                                | 50,000                                 | 10,000                                  |
| Claude Haiku 3.5 ([非推奨](/docs/ja/about-claude/model-deprecations))                    | 50                                | 50,000<sup>†</sup>                     | 10,000                                  |
| Claude Haiku 3                                                                               | 50                                | 50,000<sup>†</sup>                     | 10,000                                  |
| Claude Opus 4.x<sup>*</sup>                                                                  | 50                                | 30,000                                 | 8,000                                   |
| Claude Opus 3 ([非推奨](/docs/ja/about-claude/model-deprecations))                      | 50                                | 20,000<sup>†</sup>                     | 4,000                                   |

</Tab>
<Tab title="ティア 2">
| モデル                                                                                        | 1 分あたりの最大リクエスト数 (RPM) | 1 分あたりの最大入力トークン数 (ITPM) | 1 分あたりの最大出力トークン数 (OTPM) |
| -------------------------------------------------------------------------------------------- | --------------------------------- | -------------------------------------- | --------------------------------------- |
| Claude Sonnet 4.x<sup>**</sup>                                                               | 1,000                             | 450,000                                | 90,000                                  |
| Claude Sonnet 3.7 ([非推奨](/docs/ja/about-claude/model-deprecations))                   | 1,000                             | 40,000                                 | 16,000                                  |
| Claude Haiku 4.5                                                                             | 1,000                             | 450,000                                | 90,000                                  |
| Claude Haiku 3.5 ([非推奨](/docs/ja/about-claude/model-deprecations))                    | 1,000                             | 100,000<sup>†</sup>                    | 20,000                                  |
| Claude Haiku 3                                                                               | 1,000                             | 100,000<sup>†</sup>                    | 20,000                                  |
| Claude Opus 4.x<sup>*</sup>                                                                  | 1,000                             | 450,000                                | 90,000                                  |
| Claude Opus 3 ([非推奨](/docs/ja/about-claude/model-deprecations))                      | 1,000                             | 40,000<sup>†</sup>                     | 8,000                                   |

</Tab>
<Tab title="ティア 3">
| モデル                                                                                        | 1 分あたりの最大リクエスト数 (RPM) | 1 分あたりの最大入力トークン数 (ITPM) | 1 分あたりの最大出力トークン数 (OTPM) |
| -------------------------------------------------------------------------------------------- | --------------------------------- | -------------------------------------- | --------------------------------------- |
| Claude Sonnet 4.x<sup>**</sup>                                                               | 2,000                             | 800,000                                | 160,000                                 |
| Claude Sonnet 3.7 ([非推奨](/docs/ja/about-claude/model-deprecations))                   | 2,000                             | 80,000                                 | 32,000                                  |
| Claude Haiku 4.5                                                                             | 2,000                             | 1,000,000                              | 200,000                                 |
| Claude Haiku 3.5 ([非推奨](/docs/ja/about-claude/model-deprecations))                    | 2,000                             | 200,000<sup>†</sup>                    | 40,000                                  |
| Claude Haiku 3                                                                               | 2,000                             | 200,000<sup>†</sup>                    | 40,000                                  |
| Claude Opus 4.x<sup>*</sup>                                                                  | 2,000                             | 800,000                                | 160,000                                 |
| Claude Opus 3 ([非推奨](/docs/ja/about-claude/model-deprecations))                      | 2,000                             | 80,000<sup>†</sup>                     | 16,000                                  |

</Tab>
<Tab title="ティア 4">
| モデル                                                                                        | 1 分あたりの最大リクエスト数 (RPM) | 1 分あたりの最大入力トークン数 (ITPM) | 1 分あたりの最大出力トークン数 (OTPM) |
| -------------------------------------------------------------------------------------------- | --------------------------------- | -------------------------------------- | --------------------------------------- |
| Claude Sonnet 4.x<sup>**</sup>                                                               | 4,000                             | 2,000,000                              | 400,000                                 |
| Claude Sonnet 3.7 ([非推奨](/docs/ja/about-claude/model-deprecations))                   | 4,000                             | 200,000                                | 80,000                                  |
| Claude Haiku 4.5                                                                             | 4,000                             | 4,000,000                              | 800,000                                 |
| Claude Haiku 3.5 ([非推奨](/docs/ja/about-claude/model-deprecations))                    | 4,000                             | 400,000<sup>†</sup>                    | 80,000                                  |
| Claude Haiku 3                                                                               | 4,000                             | 400,000<sup>†</sup>                    | 80,000                                  |
| Claude Opus 4.x<sup>*</sup>                                                                  | 4,000                             | 2,000,000                              | 400,000                                 |
| Claude Opus 3 ([非推奨](/docs/ja/about-claude/model-deprecations))                      | 4,000                             | 400,000<sup>†</sup>                    | 80,000                                  |

</Tab>
<Tab title="カスタム">
Enterprise ユースケースのより高い制限を求めている場合は、[Claude Console](/settings/limits) を通じて営業に連絡してください。
</Tab>
</Tabs>

_<sup>* - Opus 4.x レート制限は、Opus 4、Opus 4.1、および Opus 4.5 全体の結合トラフィックに適用される合計制限です。</sup>_

_<sup>** - Sonnet 4.x レート制限は、Sonnet 4 と Sonnet 4.5 の両方全体の結合トラフィックに適用される合計制限です。</sup>_

_<sup>† - 制限は ITPM 使用量に対して `cache_read_input_tokens` をカウントします。</sup>_

### Message Batches API

Message Batches API には、すべてのモデル全体で共有される独自のレート制限セットがあります。これには、すべての API エンドポイントへの 1 分あたりのリクエスト数 (RPM) 制限と、同時に処理キューに入ることができるバッチリクエストの数の制限が含まれます。ここで「バッチリクエスト」とは、Message Batch の一部を指します。数千のバッチリクエストを含む Message Batch を作成でき、それぞれがこの制限にカウントされます。バッチリクエストは、モデルによってまだ正常に処理されていない場合、処理キューの一部と見なされます。

<Tabs>
<Tab title="ティア 1">
| 1 分あたりの最大リクエスト数 (RPM) | 処理キューの最大バッチリクエスト数 | バッチあたりの最大バッチリクエスト数 |
| --------------------------------- | ------------------------------------------ | -------------------------------- |
| 50                                | 100,000                                    | 100,000                          |
</Tab>
<Tab title="ティア 2">
| 1 分あたりの最大リクエスト数 (RPM) | 処理キューの最大バッチリクエスト数 | バッチあたりの最大バッチリクエスト数 |
| --------------------------------- | ------------------------------------------ | -------------------------------- |
| 1,000                             | 200,000                                    | 100,000                          |
</Tab>
<Tab title="ティア 3">
| 1 分あたりの最大リクエスト数 (RPM) | 処理キューの最大バッチリクエスト数 | バッチあたりの最大バッチリクエスト数 |
| --------------------------------- | ------------------------------------------ | -------------------------------- |
| 2,000                             | 300,000                                    | 100,000                          |
</Tab>
<Tab title="ティア 4">
| 1 分あたりの最大リクエスト数 (RPM) | 処理キューの最大バッチリクエスト数 | バッチあたりの最大バッチリクエスト数 |
| --------------------------------- | ------------------------------------------ | -------------------------------- |
| 4,000                             | 500,000                                    | 100,000                          |
</Tab>
<Tab title="カスタム">
Enterprise ユースケースのより高い制限を求めている場合は、[Claude Console](/settings/limits) を通じて営業に連絡してください。
</Tab>
</Tabs>

### 長いコンテキストレート制限

[1M トークンコンテキストウィンドウが有効](/docs/ja/build-with-claude/context-windows#1m-token-context-window) な Claude Sonnet 4 および Sonnet 4.5 を使用する場合、200K トークンを超えるリクエストに対して以下の専用レート制限が適用されます。

<Note>
1M トークンコンテキストウィンドウは現在、使用ティア 4 の組織およびカスタムレート制限を持つ組織のベータ版です。1M トークンコンテキストウィンドウは Claude Sonnet 4 および Sonnet 4.5 でのみ利用可能です。
</Note>

<Tabs>
<Tab title="ティア 4">
| 1 分あたりの最大入力トークン数 (ITPM) | 1 分あたりの最大出力トークン数 (OTPM) |
| -------------------------------------- | --------------------------------------- |
| 1,000,000                              | 200,000                                 |
</Tab>
<Tab title="カスタム">
エンタープライズユースケースのカスタム長いコンテキストレート制限については、[Claude Console](/settings/limits) を通じて営業に連絡してください。
</Tab>
</Tabs>

<Tip>
1M トークンコンテキストウィンドウをレート制限で最大限に活用するには、[プロンプトキャッシング](/docs/ja/build-with-claude/prompt-caching) を使用してください。
</Tip>

### Console でレート制限を監視する

[Claude Console](/) の [使用ページ](/settings/usage) でレート制限の使用状況を監視できます。

トークンとリクエストのチャートを提供することに加えて、使用ページは 2 つの個別のレート制限チャートを提供します。これらのチャートを使用して、成長の余地がどの程度あるか、ピーク使用に達する可能性がある時期、要求するレート制限をより理解する方法、またはキャッシング率を改善する方法を確認してください。チャートは、特定のレート制限 (例: モデルごと) の多くのメトリクスを視覚化します:

- **レート制限 - 入力トークン** チャートには以下が含まれます:
  - 1 時間ごとの最大キャッシュなし入力トークン/分
  - 現在の入力トークン/分レート制限
  - 入力トークンのキャッシュレート (つまり、キャッシュから読み込まれた入力トークンの割合)
- **レート制限 - 出力トークン** チャートには以下が含まれます:
  - 1 時間ごとの最大出力トークン/分
  - 現在の出力トークン/分レート制限

## ワークスペースの下限を設定する

組織内のワークスペースが潜在的な過度な使用から保護されるように、ワークスペースごとにカスタム支出制限とレート制限を設定できます。

例: 組織の制限が 1 分あたり 40,000 入力トークンと 1 分あたり 8,000 出力トークンの場合、1 つのワークスペースを 1 分あたり 30,000 合計トークンに制限する可能性があります。これは他のワークスペースが潜在的な過度な使用から保護され、組織全体でリソースのより公平な分配を確保します。残りの未使用トークン/分 (またはそれ以上、そのワークスペースが制限を使用しない場合) は、他のワークスペースが使用できるようになります。

注:
- デフォルトワークスペースに制限を設定することはできません。
- 設定されていない場合、ワークスペース制限は組織の制限と一致します。
- 組織全体の制限は常に適用されます。ワークスペース制限の合計がそれ以上の場合でも。
- 入力および出力トークン制限のサポートは、将来ワークスペースに追加されます。

## レスポンスヘッダー

API レスポンスには、実施されたレート制限、現在の使用状況、および制限がリセットされる時期を示すヘッダーが含まれます。

以下のヘッダーが返されます:

| ヘッダー                                        | 説明                                                                                                                                     |
| --------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------- |
| `retry-after`                                 | リクエストを再試行できるまで待機する秒数。早い再試行は失敗します。                                                                                                                      |
| `anthropic-ratelimit-requests-limit`          | レート制限期間内で許可されるリクエストの最大数。                                                                                                                            |
| `anthropic-ratelimit-requests-remaining`      | レート制限される前に残っているリクエスト数。                                                                                                                                     |
| `anthropic-ratelimit-requests-reset`          | リクエストレート制限が完全に補充される時刻。RFC 3339 形式で提供されます。                                                                                                                    |
| `anthropic-ratelimit-tokens-limit`            | レート制限期間内で許可されるトークンの最大数。                                                                                                                              |
| `anthropic-ratelimit-tokens-remaining`        | レート制限される前に残っているトークン数 (最も近い 1,000 に丸められます)。                                                                                                                     |
| `anthropic-ratelimit-tokens-reset`            | トークンレート制限が完全に補充される時刻。RFC 3339 形式で提供されます。                                                                                                                      |
| `anthropic-ratelimit-input-tokens-limit`      | レート制限期間内で許可される入力トークンの最大数。                                                                                                                                        |
| `anthropic-ratelimit-input-tokens-remaining`  | レート制限される前に残っている入力トークン数 (最も近い 1,000 に丸められます)。                                                                                                               |
| `anthropic-ratelimit-input-tokens-reset`      | 入力トークンレート制限が完全に補充される時刻。RFC 3339 形式で提供されます。                                                                                                                |
| `anthropic-ratelimit-output-tokens-limit`     | レート制限期間内で許可される出力トークンの最大数。                                                                                                                                       |
| `anthropic-ratelimit-output-tokens-remaining` | レート制限される前に残っている出力トークン数 (最も近い 1,000 に丸められます)。                                                                                                              |
| `anthropic-ratelimit-output-tokens-reset`     | 出力トークンレート制限が完全に補充される時刻。RFC 3339 形式で提供されます。                                                                                                                |
| `anthropic-priority-input-tokens-limit`       | レート制限期間内で許可される Priority Tier 入力トークンの最大数。(Priority Tier のみ)                                                                                                     |
| `anthropic-priority-input-tokens-remaining`   | レート制限される前に残っている Priority Tier 入力トークン数 (最も近い 1,000 に丸められます)。(Priority Tier のみ)                                                                            |
| `anthropic-priority-input-tokens-reset`       | Priority Tier 入力トークンレート制限が完全に補充される時刻。RFC 3339 形式で提供されます。(Priority Tier のみ)                                                                             |
| `anthropic-priority-output-tokens-limit`      | レート制限期間内で許可される Priority Tier 出力トークンの最大数。(Priority Tier のみ)                                                                                                    |
| `anthropic-priority-output-tokens-remaining`  | レート制限される前に残っている Priority Tier 出力トークン数 (最も近い 1,000 に丸められます)。(Priority Tier のみ)                                                                           |
| `anthropic-priority-output-tokens-reset`      | Priority Tier 出力トークンレート制限が完全に補充される時刻。RFC 3339 形式で提供されます。(Priority Tier のみ)                                                                            |

`anthropic-ratelimit-tokens-*` ヘッダーは、現在有効な最も制限的な制限の値を表示します。たとえば、ワークスペース 1 分あたりのトークン制限を超えた場合、ヘッダーにはワークスペース 1 分あたりのトークンレート制限値が含まれます。ワークスペース制限が適用されない場合、ヘッダーは合計トークンの残り数を返します。合計は入力トークンと出力トークンの合計です。このアプローチにより、現在の API 使用に対する最も関連性のある制約を可視化できます。